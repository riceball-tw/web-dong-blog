---
isDraft: false
icon: { name: 'material-symbols:eye-tracking-outline-rounded', title: 'çœ¼ç›ç›£è¦–ç¬¦è™Ÿ' }
title: 'Real use case of intersection observer: Table of Contents'
titleTC: 'Intersection Observer çœŸå¯¦æ¡ˆä¾‹ï¼šè‡ªå‹•æ›´æ–°ç›®éŒ„'
excerpt: 'è¿‘æœŸè£½ä½œåˆ°å…§å®¹å¤§ç¶±ï¼ˆTable of Contentsï¼‰ç›¸é—œçš„åŠŸèƒ½ï¼Œç™¼ç¾æ˜¯ä¸€å€‹å¾ˆé©åˆä½¿ç”¨ Intersection Observer çš„æ¡ˆä¾‹ï¼Œé€éç›£è½ç‰¹å®šå…ƒç´ ä¾†è‡ªå‹•æ›´æ–°ç›®éŒ„çš„ç‹€æ…‹ã€‚åœ¨æ—©æœŸå¯èƒ½æœƒéœ€è¦é€é getBoundingClientRect ä¹‹é¡çš„æ–¹æ³•ä¾†è¨ˆç®—å…ƒç´ æœ‰æ²’æœ‰é›¢é–‹è¦–çª—ï¼Œç¾åœ¨é€™æ¨£çš„éœ€æ±‚å°±è®Šå¾—æ›´åŠ å®¹æ˜“å¯¦ç¾ã€‚'
series: 'è¦–å€åµæ¸¬'
category: 'å¯¦ä½œ'
tags: ['toc', 'Intersection Observer', 'getBoundingClientRect']
publishDate: 2024-09-16
lastModifiedDate: 2024-09-30
---

## å‰è¨€

è¿‘æœŸè£½ä½œåˆ°å…§å®¹å¤§ç¶±ï¼ˆTable of Contentsï¼‰ç›¸é—œçš„åŠŸèƒ½ï¼Œç™¼ç¾æ˜¯ä¸€å€‹å¾ˆé©åˆä½¿ç”¨ Intersection Observer çš„æ¡ˆä¾‹ï¼Œé€éç›£è½ç‰¹å®šå…ƒç´ ä¾†è‡ªå‹•æ›´æ–°ç›®éŒ„çš„ç‹€æ…‹ã€‚

åœ¨æ—©æœŸå¯èƒ½æœƒéœ€è¦é€éç›£è½ç¶²é æ»‘å‹•äº‹ä»¶ä¸¦ä¸”é€é `getBoundingClientRect` æ–¹æ³•ä¾†è¨ˆç®—å…ƒç´ æœ‰æ²’æœ‰é›¢é–‹è¦–çª—ï¼Œä½†éš¨è‘—å°ˆé–€åµæ¸¬å…ƒç´ æ˜¯å¦é€²å…¥è¦–çª—çš„ API å‡ºç¾ï¼Œé€™æ¨£çš„éœ€æ±‚å°±è®Šå¾—æ›´åŠ å®¹æ˜“å¯¦ç¾ã€‚

å¦‚æœä½ å°æ–¼æ–°èˆŠåšæ³•æ¯”è¼ƒæœ‰èˆˆè¶£å¯ä»¥åƒè€ƒé€™ç¯‡æ–‡ç« ï¼š[Use Intersection Observer instead of Scroll Events - Jonathan Lau](https://blog.jonathanlau.io/posts/use-intersection-observer-instead/#performance-impact)ï¼Œæœ‰è©³ç´°ä¸”çš„æ¯”è¼ƒä»‹ç´¹ã€‚

| ç‰¹å¾µ         | Intersection Observer                            | Scroll äº‹ä»¶ç›£è½ + `getBoundingClientRect`              |
| ------------ | ------------------------------------------------ | ------------------------------------------------------ |
| **ä¸»åŸ·è¡Œåº** | åŸ·è¡Œæ–¼ä¸»åŸ·è¡Œåºä¹‹å¤–ï¼Œä¸æœƒé˜»ç¤™å…¶ä»–äº‹é …             | åŸ·è¡Œæ–¼ä¸»åŸ·è¡Œåºï¼Œæœƒé˜»ç¤™å…¶ä»–äº‹é …                         |
| **æ•ˆèƒ½é–‹æ”¯** | æœ‰æ•ˆè·Ÿè¹¤å…ƒç´ æ˜¯å¦å¯è¦‹ï¼Œåªåœ¨å¿…è¦æ™‚åŸ·è¡Œ             | æ¯æ¬¡æ»¾å‹•æ™‚æª¢æŸ¥å…ƒç´ ä½ç½®ï¼Œæœ‰å¯èƒ½æœƒè€—è²»æ›´å¤šè³‡æº           |
| **æ˜“ç”¨ç¨‹åº¦** | å°ˆé–€ç”¨æ–¼æª¢æŸ¥å…ƒç´ æ˜¯å¦é€²å…¥è¦–è§’ï¼Œå…·å‚™å¼·å¤§ç°¡å–®çš„ä»‹é¢ | æ›´åº•å±¤ç´¢å–å€‹åˆ¥å…ƒç´ åœ¨ç•«é¢ä¸­çš„è³‡è¨Šï¼Œå¯èƒ½è¨ˆç®—éœ€æ›´è¤‡é›œç¹ç‘£ |

é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼æˆ‘è§£é¡Œçš„æ–¹å‘æœƒåå¥½å¾å·²ç¶“æ¨å‡ºä¸€æ®µæ™‚é–“ç›¸å°æˆç†Ÿçš„ Intersection Observer é–‹å§‹å¯¦ä½œï¼Œä¸éå¾ŒçºŒä¹Ÿç¢°ä¸Šäº†ä¸€äº›æ„æ–™ä¹‹å¤–çš„å•é¡Œã€‚

## å•é¡Œ

è£½ä½œä¸€å€‹å¯ä»¥æ ¹æ“šç‰¹å®šå…ƒç´ å…§çš„æ¨™é¡Œç”Ÿæˆç›®éŒ„æ¸…å–®çš„åŠŸèƒ½ï¼Œä¸¦ä¸”æ¸…å–®æœƒæ ¹æ“šæ»‘å‹•ä½ç½®é©ç•¶çš„é¡¯ç¤ºæ¿€æ´»æ¨£å¼ï¼š

- å¯è‡ªå‹•æ ¹æ“šç›®å‰æ–‡ç« ä¸­çš„å…§å®¹ç”Ÿæˆå°æ‡‰çš„ç›®éŒ„é€£çµæ¸…å–®ä¸¦é¡¯ç¤ºåœ¨å´æ¬„
- ç•¶ä½¿ç”¨è€…æ»¾å‹•åˆ°å°æ‡‰å€å¡Šæ™‚ï¼Œè‡ªå‹•æ›´æ–°ç›®éŒ„æ¿€æ´»çš„ç‹€æ…‹
- ç•¶ä½¿ç”¨è€…é»æ“Šç›®éŒ„é€£çµæ™‚ï¼Œæ»¾å‹•åˆ°å°æ‡‰çš„ä½ç½®

```html
<main>
  <div>
    <h1>TOC DEMO</h1>
    <div>
      <section>
        <h2>Title One</h2>
        <p>...</p>
      </section>
      <section>
        <h2>Title Two</h2>
        <p>...</p>
      </section>
      <section>
        <h2>Title Three</h2>
        <p>...</p>
      </section>
      <section>
        <h2>Title Four</h2>
        <p>...</p>
      </section>
    </div>
  </div>
  <aside>
    <ul></ul>
  </aside>
</main>
```

## è§£é¡Œ

ç”±æ–¼è‡ªå‹•æ›´æ–°ç›®éŒ„æ˜¯éå¸¸å¸¸è¦‹çš„ UI ï¼Œæ¯å€‹äººå¤šå°‘éƒ½ç”¨éæ‰€ä»¥è¦æ ¼ä¸Šå°±ä¸æœƒç‰¹åˆ¥è©³ç´°çš„æè¿°ï¼Œä½†å¯¦éš›æ¢ç©¶ä¸‹å»æœƒç™¼ç¾é€™å€‹é¡Œç›®å¯ä»¥æŒ–å‡ºéå¸¸å¤šçš„ç´°ç¯€ï¼Œèˆ‰ä¾‹åƒæ˜¯ï¼š

- æœ‰å¤šå€‹åµŒå¥—æ¨™é¡Œå€å¡Šçš„é—œä¿‚å¦‚ä½•è™•ç†ï¼Ÿ
- æ¿€æ´»çš„ç‹€æ…‹åªèƒ½æœ‰ä¸€å€‹å—ï¼Ÿå¦‚åªèƒ½ä¸€å€‹ä½†æœ‰å¤šå€‹å€å¡Šéƒ½åœ¨æ¿€æ´»ç‹€æ…‹è©²å¦‚ä½•æ“‡ä¸€æœ€ç›¸é—œçš„å€å¡Šæ¿€æ´»ï¼Ÿ
- æ»¾å‹•åˆ°å°æ‡‰å€å¡Šçš„å®šç¾©æ˜¯ä»€éº¼ï¼Ÿé›¢é–‹å€å¡Šçš„å®šç¾©æ˜¯ä»€éº¼ï¼Ÿï¼ˆå®Œæ•´æˆ–ä¸€åŠå€å¡Šé›¢é–‹æˆ–é€²å…¥ç•«é¢ï¼Ÿï¼‰
- é€£çµé»æ“Šå¾Œå¦‚ä½•æ»¾å‹•åˆ°å°æ‡‰çš„ä½ç½®ï¼Ÿå°æ‡‰çš„ä½ç½®åˆæ˜¯ä»€éº¼ï¼Ÿ

ä»¥ä¸Šæ„æ–™å¤–çš„å•é¡Œå°‡æœƒç›´æ¥å½±éŸ¿åˆ°ä½¿ç”¨é«”é©—ï¼Œæœƒå‡ºç¾**ç¨‹å¼åŸ·è¡Œæ²’æœ‰éŒ¯èª¤ï¼Œä½†é«”é©—ä¾†èªªä¸å„ªçš„æƒ…æ³**ï¼Œèˆ‰ä¾‹ä¾†èªªï¼šé»æ“Šäº†ç›®éŒ„é€£çµå¾Œï¼Œæ»¾å‹•åˆ°éé æœŸçš„ä½ç½®æˆ–æ˜¯ç›®éŒ„æ¿€æ´»çš„ä¸æ˜¯ä½¿ç”¨ä¸Šé æœŸçš„ç‹€æ…‹ã€‚ç”±æ–¼ç›®éŒ„æœƒæ˜¯å‹•æ…‹ç”Ÿæˆçš„ä¹Ÿå°è‡´é‚Šç·£æ¡ˆä¾‹å¾ˆé›£è¢«ç™¼ç¾ï¼Œå› æ­¤å…ˆæ¢è¨ç›®éŒ„é æœŸçš„è¡Œç‚ºå†ä¸‹æ‰‹å¯¦ä½œæœƒæ›´å¥½ï¼Œæˆ‘å…ˆå°‡é¡Œç›®å®šç¾©ç‚ºï¼š

- é æœŸåªéœ€åµæ¸¬ä¸€å±¤æ¨™é¡Œå€å¡Š
- æ¿€æ´»çš„ç‹€æ…‹åªèƒ½æœ‰ä¸€å€‹
- æœ€å…ˆæ¿€æ´»çš„æ¨™é¡Œç‚ºä¸»ï¼ˆæ»‘å‹•åˆ° `å€å¡Š 1` æ¥è‘—æ»‘å‹•åˆ° `å€å¡Š 2` ä½†ä»åœ¨ `å€å¡Š 1 ç•¶ä¸­` ï¼Œä½†å› ç‚º `å€å¡Š 1` å…ˆæ¿€æ´»æ‰€ä»¥ä»é¡¯ç¤º `å€å¡Š 1` ç‚ºæ¿€æ´»ï¼‰
- æ»¾å‹•åˆ°å°æ‡‰å€å¡Šçš„å®šç¾©æ˜¯å€å¡Šå®Œå…¨é€²å…¥å’Œé›¢é–‹ç•«é¢
- é€£çµé»æ“Šå¾Œæ»¾å‹•åˆ°å°æ‡‰çš„ä½ç½®æ˜¯å€å¡Šé ‚éƒ¨èˆ‡è¦–çª—é ‚éƒ¨ + `1rem` çš„ç•™ç™½

åˆæ­¥å®šç¾©éœ€æ±‚æ˜¯ä»¥ä¸Šã€‚ä¸ééš¨è‘—å¯¦ä½œçš„éç¨‹æœƒç™¼ç¾ä¸€äº›é›£çºçš„é‚Šç·£æ¡ˆä¾‹åˆ°æ™‚å€™å†ä¾†è™•ç†ã€‚

### ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆç›®éŒ„

é¦–å…ˆå¯ä»¥å…ˆæ›¿ç›®éŒ„ç›¸é—œçš„å…ƒç´ ç¶å®šæ¨™è¨˜ï¼ˆé€™è£¡æˆ‘ä½¿ç”¨ `data` å±¬æ€§ï¼‰ï¼Œä»¥æ–¹ä¾¿å¾ŒçºŒ JS ç”¨ `querySelector` æ‰¾åˆ°å°æ‡‰çš„å…ƒç´ é€²è¡Œæ“ä½œã€‚

```html
<main>
  <div>
    <h1>TOC DEMO</h1>
    <div>
      <section data-toc-section>
        <h2>Title One</h2>
        <p>...</p>
      </section>
      <!-- ... -->
    </div>
  </div>
  <aside>
    <ul data-toc></ul>
  </aside>
</main>
```

å†ä¾†å°±æ˜¯å‰µå»º `generateToc` å‡½å¼ï¼Œé æœŸæœƒæ‹¿åˆ°è¦æ³¨å…¥ç›®éŒ„çš„ç›®æ¨™ toc å…ƒç´ ä»¥åŠè¦åµæ¸¬çš„å€å¡Šã€‚

```ts
function generateToc(tocElement: HTMLUListElement, sectionElements: NodeListOf<HTMLElement>) {
  sectionElements.forEach(function (section, index) {
    // æ›¿æ¯å€‹å€å¡Šæ·»åŠ å°æ‡‰ id
    const sectionId = 'toc' + (index + 1);
    section.setAttribute('id', sectionId);

    // å‰µå»ºã€Œç›®éŒ„é€£çµå…ƒç´ ã€æ ¹æ“šç¾æœ‰å€å¡Š
    const tocLink = document.createElement('a');
    tocLink.setAttribute('href', '#' + sectionId);
    tocLink.setAttribute('data-id', sectionId);
    const sectionTitle = section.querySelector('h2');
    if (sectionTitle) {
      tocLink.textContent = sectionTitle.textContent;
    }

    // å‰µå»ºã€Œç›®éŒ„é …ç›®å…ƒç´ ã€
    const tocItem = document.createElement('li');
    tocItem.appendChild(tocLink);

    // æ³¨å…¥ã€Œç›®éŒ„å…ƒç´ ã€åˆ° ã€Œtoc å…ƒç´ ã€
    tocElement.appendChild(tocItem);
  });
}

const tocElement = document.querySelector<HTMLUListElement>('[data-toc]');
const targetSectionElements = document.querySelectorAll<HTMLElement>('[data-toc-section]');
if (tocElement) {
  generateToc(tocElement, targetSectionElements);
}
```

é€™æ¨£å°±æœƒå¾—åˆ°ä¸€å€‹è‡ªå‹•åµæ¸¬ç•¶å‰æ–‡ç« å…§å®¹ä¸¦ç”Ÿæˆå°æ‡‰ç›®éŒ„çš„åŠŸèƒ½ï¼Œä¸¦ä¸”é‹ç”¨ `<a>` æ¨™ç±¤æ­é… `#` è·³è½‰çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨é»æ“Šé€£çµæ™‚ `target` è·³è½‰åˆ°ç‰¹å®šçš„ `id` ä¸Šã€‚

### ç¬¬äºŒæ­¥ï¼šç›£è½å€å¡Šé€²å…¥èˆ‡é›¢é–‹ç•«é¢ä¸¦é©ç•¶çš„æ¿€æ´»é …ç›®

è®“æˆ‘å€‘å…ˆç°¡å–®å®šç¾© `activeTocs` ä¾†è¨˜éŒ„ç•¶å‰æ¿€æ´»çš„å€å¡Šï¼š

```ts
let activeTocs: string[] = [];
```

åœ¨ç”Ÿæˆ TOC å¾Œå¯ä»¥é–‹å§‹æ›¿æ¯ä¸€å€‹å€å¡Šæ·»åŠ  Intersection Observerï¼Œ`initIntersectionObserverForToc` é€éç›£è½å€å¡Šé€²å…¥èˆ‡é›¢é–‹ç•«é¢çš„äº‹ä»¶ä¾†æ›´æ–°ç›®éŒ„çš„æ¿€æ´»ç‹€æ…‹ã€‚

```ts ins={49}
/**
 * åµæ¸¬å€å¡Šé€²å…¥æˆ–é›¢é–‹ç•«é¢
 * 1. è¦–å€å…§ï¼Œå°‡å€å¡Š id æ·»åŠ åˆ° activeTocIds
 * 2. è¦–å€å¤–ï¼Œå°‡å€å¡Š id å¾ activeTocIds ç§»é™¤
 */
function initIntersectionObserverForToc(sectionElements: NodeListOf<HTMLElement>) {
  sectionElements.forEach((section) =>
    new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        const targetSectionId = entry.target.getAttribute('id');
        if (!targetSectionId) return;
        if (entry.isIntersecting) {
          activeTocIds.push(targetSectionId);
        } else {
          const targetSectionIdIndex = activeTocIds.indexOf(targetSectionId);
          const isTargetSectionId = targetSectionIdIndex !== -1;
          if (isTargetSectionId) {
            activeTocIds.splice(targetSectionIdIndex, 1);
          }
        }
        updateActiveTocItem();
      });
    }).observe(section),
  );
}

/**
 * æ›´æ–°ç›®éŒ„ DOM æ¿€æ´»ç‹€æ…‹
 */
function updateActiveTocItem() {
  document.querySelectorAll('[data-toc] a').forEach((tocItem) => {
    tocItem.classList.remove('active');
  });

  if (activeTocIds.length > 0) {
    const firstActiveId = activeTocIds[0];
    document.querySelectorAll('[data-toc] a').forEach((tocItem) => {
      if (tocItem.getAttribute('href') === `#${firstActiveId}`) {
        tocItem.classList.add('active');
      }
    });
  }
}

const tocElement = document.querySelector<HTMLUListElement>('[data-toc]');
const targetSectionElements = document.querySelectorAll<HTMLElement>('[data-toc-section]');
if (tocElement) {
  generateToc(tocElement, targetSectionElements);
  initIntersectionObserverForToc(targetSectionElements);
}
```

### ç¬¬ä¸‰æ­¥ï¼šç²¾ç´°çš„æ¿€æ´»å€å¡Šåµæ¸¬

ç›®å‰é‚è¼¯æ˜¯ï¼šç•¶æœ‰å¤šå€‹å€å¡Šè¢«æ¿€æ´»ï¼Œæœ€å…ˆè¢«æ¿€æ´»çš„å€å¡Šå„ªå…ˆé¡¯ç¤ºè¢«æ¿€æ´»ï¼Œç•¢ç«Ÿåªèƒ½é¡¯ç¤ºä¸€å€‹æ¿€æ´»ç‹€æ…‹ã€‚

å¦‚æœé‡åˆ°çš„æƒ…å¢ƒæ‡‰è©²æ˜¯æ»‘å‹•å…¥ `A` åˆå…¥ `B`ï¼Œä½†æ»‘äº†ä¸€é™£å­ `B` é‚„æ˜¯å­˜åœ¨æ–¼ç•«é¢ä¸­æ‰€ä»¥ä¸€ç›´ä½”è‘—æ¿€æ´»ç‹€æ…‹ã€‚é€™éº¼åšæ¿€æ´»é¡¯ç¤ºé›–ç„¶æ˜¯æ­£ç¢ºçš„ä½†å¯èƒ½æ¿€æ´»åˆ°æ¯”è¼ƒä¸ç›¸é—œçš„é …ç›®ã€‚çœŸçš„è¦å–ä¸€å€‹æœ€ç›¸é—œçš„å€å¡Šæ¿€æ´»æ‡‰è©²å°±è¦ç®—å€å¡Šåœ¨ç•«é¢ä¸­çš„ä½”æ¯”ï¼Œæ ¹æ“šåˆ°é”ç•«é¢ç‰¹å®šæ¯”ä¾‹è§¸ç™¼ Observer çš„è¨­å®šå¯ä»¥ä½¿ç”¨ [`threshold`](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#threshold) è¨­å®šï¼Œç°¡å–®ä¾†èªªå°±æ˜¯ä¸€å€‹é™£åˆ—å¾ `0 ~ 1`ï¼Œç•¶åˆ°é”ç‰¹å®šæ¯”ä¾‹å°±æœƒè§¸ç™¼ observer çš„å›å‘¼å‡½å¼ï¼š

æ¥è‘—è®“æˆ‘å€‘æ·»åŠ ä¸Šè©²è¨­å®šï¼Œä¸¦ä¸”å‰µå»ºæ–°å‡½å¼ `updateActiveTocWithRatio` ä¾†æ›´æ–°ç›®éŒ„çš„æ¿€æ´»ç‹€æ…‹ã€‚

```js
const targetSectionId = entry.target.getAttribute('id');

new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (isSectionVisible) {
        // æ›´æ–°æ¯å€‹å€å¡Šçš„å¯è¦‹åº¦ä½”æ¯”åˆ° activeTocIds
        updateActiveTocWithRatio(targetSectionId, entry.intersectionRatio);
      } else {
        // ...
      }
    });
  },
  {
    threshold: [0, 0.1, 0.3, 0.5, 0.7, 0.9, 1], // è¨­å®š 0% åˆ° 100% çš„ threshold
  },
).observe(section);
```

ç¾åœ¨æ¯æ¬¡å€å¡Šé€²å…¥ç•«é¢ä¸¦ä¸”åˆ°é”ç‰¹å®šçš„ `threshold` æ™‚å°±æœƒè§¸ç™¼ä»¥ä¸‹å‡½å¼ï¼Œæˆ‘å€‘å¯ä»¥åˆ¤æ–·æ˜¯å¦å·²ç¶“å­˜åœ¨æ–¼ `activeTocIds` ä¸­ï¼Œå¦‚æœå­˜åœ¨å°±æ›´æ–°ä½”æ¯”ï¼Œä¸å­˜åœ¨å°±æ–°å¢ä¸€å€‹æ–°çš„å€å¡Šç´€éŒ„ï¼Œä¸¦ä¸”è®“ç•«é¢ä½”æ¯”é«˜çš„å€å¡Šå„ªå…ˆé¡¯ç¤ºæ¿€æ´»ç‹€æ…‹ã€‚

```js
function updateActiveTocWithRatio(sectionId, ratio) {
  const existingItemIndex = activeTocIds.findIndex((item) => item.id === sectionId);
  // 1. å·²å­˜åœ¨å€å¡Šç´€éŒ„ = æ›´æ–°è©²å€å¡Šçš„ä½”æ¯”
  // 2. ä¸å­˜åœ¨å€å¡Šç´€éŒ„ = æ–°å¢è©²å€å¡Šç´€éŒ„
  if (existingItemIndex === -1) {
    activeTocIds.push({ id: sectionId, ratio });
  } else {
    activeTocIds[existingItemIndex].ratio = ratio;
  }
  // å°‡ä½”æ¯”æœ€é«˜çš„å€å¡Šæ”¾åˆ°æœ€å‰é¢
  activeTocIds.sort((a, b) => b.ratio - a.ratio);
  updateActiveTocItem();
}
```

### æ¨£å¼ï¼šæ·»åŠ è·³è½‰å€å¡Šå‹•ç•«æ™‚èˆ‡è¦–çª—é–“çš„é ç•™ç©ºé–“

è·³è½‰å‹•ç•«å¯ä»¥ç°¡å–®çš„é€é CSS `scroll-behavior` å±¬æ€§ä¾†å¯¦ç¾ï¼Œä¹Ÿå¯ä»¥é¡å¤–è§€å¯Ÿç”¨æˆ¶åå¥½æœ‰ç„¡é–‹å•Ÿå‹•ç•«æ¸›å¼±ï¼Œä»¥é©ç•¶çš„é—œé–‰è·³è½‰å‹•ç•«ã€‚

```css
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}
```

é›–ç„¶é€é `#` è·³è½‰å¯ä»¥è®“é é¢è‡ªå‹•è·³åˆ°å°æ‡‰çš„å€å¡Šï¼Œä½†é€™æ¨£æœƒè®“å€å¡Šé ‚éƒ¨èˆ‡è¦–çª—é ‚éƒ¨è²¼é½Šã€‚è¦èª¿æ•´è·³è½‰çš„ä½ç½®å¯ä»¥è€ƒæ…®ä½¿ç”¨ CSS [scroll-margin-top](https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-margin-top) å±¬æ€§ï¼Œå¯ä»¥è¨­ç½®æ»‘å‹•ç›®æ¨™èˆ‡è¦–çª—é ‚éƒ¨ä¿æŒä¸€å®šçš„è·é›¢ã€‚

```css
.section {
  scroll-margin-top: 1rem;
}
```

éœ€ç‰¹åˆ¥ç•™æ„ç¶²é åœ¨æœ‰ `fixed` å¸ƒå±€çš„å°è¦½åˆ—æƒ…æ³ä¸‹å¯èƒ½æœƒæ“‹ä½å€å¡Šï¼Œé€™æ™‚å€™å°±éœ€è¦é ç•™æ›´å¤šçš„ç©ºé–“ï¼Œä»¥é¿å…è·³è½‰å¾Œå€å¡Šè¢«å°è¦½åˆ—é®è“‹ã€‚

é€šå¸¸æˆ‘æœƒå°‡é é¢ä¸Šæ–¹ `fixed` å…ƒç´ çš„é«˜åº¦é€é CSS è®Šæ•¸ä¾†è¨˜éŒ„ï¼ˆé€šå¸¸æ˜¯å°è¦½åˆ—ï¼‰ã€‚

```css
:root {
  --nav-height: 80px;
}

.section {
  scroll-margin-top: calc(var(--nav-height) + 1rem);
}
```

ä¸¦ä¸”ä¹Ÿè¦**ç•™æ„å¤šç¨®å°ºå¯¸ä¸‹è·³è½‰ç›®æ¨™æ‰€éœ€çš„ç•™ç™½è®ŠåŒ–**ï¼ˆä¾‹å¦‚ä¸åŒå°ºå¯¸ä¸‹å°è¦½åˆ—çš„é«˜æœ‰æ”¹è®Šå°±å°è‡´æ¯å€‹æ¨™é¡Œè¦å¤šç•™ç™½ï¼‰ï¼Œå¦‚æœå°è¦½åˆ—æœ‰æ”¶åˆå±•é–‹çš„ç‹€æ…‹ç”šè‡³æœƒéœ€è¦æ’°å¯« JS å»æ”¹å¯«å„å€å¡Šçš„ `scroll-margin-top` æ•¸å€¼ã€‚

### é™¤éŒ¯ï¼šè§€å¯Ÿè³‡æ–™è®Šå‹•

```js
function createDebugDisplay() {
  const debugDisplay = document.createElement('div');
  debugDisplay.id = 'debug-display';
  debugDisplay.style.cssText = `
    position: fixed;
    top: 10px;
    left: 10px;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 10px;
    border-radius: 5px;
    font-family: monospace;
    font-size: 12px;
    z-index: 9999;
    max-height: 80vh;
    overflow-y: auto;
  `;
  document.body.insertBefore(debugDisplay, document.body.firstChild);
  return debugDisplay;
}

function updateDebugDisplay() {
  const debugDisplay = document.getElementById('debug-display') || createDebugDisplay();
  debugDisplay.innerHTML =
    '<h3>ActiveTocs:</h3>' +
    activeTocs.map((activeToc) => `<div>ID: ${activeToc.id}, ratio: ${activeToc.ratio}</div>`).join('');
}
```

{/* prettier-ignore */}
<p class="codepen" data-height="300" data-default-tab="result" data-slug-hash="vYqwxpa" data-pen-title="Basic - Real use case of intersection observer: Table of Contents" data-preview="true" data-editable="true" data-user="riecball" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/riecball/pen/vYqwxpa">
  Basic - Real use case of intersection observer: Table of Contents</a> by Riceball (<a href="https://codepen.io/riecball">@riecball</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>

## é©—æ”¶

### ç•¶å€å¡Šè¶…å¤§æ™‚æœƒå°è‡´æ›´æ–°å¤±æ•ˆï¼Œä»é¡¯ç¤ºèˆŠçš„æ¿€æ´»é …ç›®

ä¸€å€‹æ¥µç«¯æ¡ˆä¾‹ç‰¹åˆ¥å®¹æ˜“ç™¼ç”Ÿåœ¨é€²å‡ºè¶…éè¦–è§’çš„å€å¡Šï¼ŒåŸå› æ˜¯å› ç‚ºå¦‚æœå€å¡Šå…§å®¹è¶…éè¦–è§’æ™‚å°‡ç„¡æ³•è§¸ç™¼ Observer æ›´æ–°ï¼ŒåŸå› å¯ä»¥åƒè€ƒè¨è«–ï¼š[How should larger-than-viewport-dimension targets be handled](https://github.com/w3c/IntersectionObserver/issues/124)ã€‚

å°æ–¼ Intersection Observer çš„ç†è§£èˆ‡çœ‹éçš„ç¯„ä¾‹ä¸€ç›´ä»¥ä¾†éƒ½æ˜¯å¾ˆç°¡å–®çš„å°å…ƒç´ åœ¨ç•«é¢ä¸­ï¼Œä¸¦ä¸”å¯ä»¥è¨­ç½® `threshold` å»åˆ¤æ–·å…ƒç´ å‡ºç¾åœ¨ç•«é¢ä¸­ä¸€å®šçš„æ¯”ä¾‹å¾Œè§¸ç™¼å›å‘¼å‡½å¼ï¼Œä½†å»æ²’æœ‰æƒ³é**å¦‚æœå…ƒç´ å¤§æ–¼ç•«é¢æ™‚æœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…**ï¼Œæ»‘åˆ°ä¸­é€”å°±å¯èƒ½æ²’è¾¦æ³•å†å¢åŠ å æ¯”ï¼Ÿç•¢ç«Ÿè¦–è§’çš„å°ºå¯¸æ˜¯æœ‰é™çš„ã€‚

æ¨¡æ“¬ä¸€ä¸‹æœƒç™¼ç¾ **ç•¶å€å¡Šå…§å®¹è¶…éè¦–è§’æ™‚ï¼Œé€™å€‹å€å¡Šçš„ Observer åµæ¸¬æœƒåªåœ¨é€²å…¥èˆ‡é›¢é–‹æ™‚è§¸ç™¼ï¼Œéæ¸¡ä¸¦ä¸æœƒè§¸ç™¼å›å‘¼** ï¼Œä¹Ÿå°±æœƒå‡ºç¾ã€Œå¤§æ–¼è¦–è§’å€å¡Šçš„å‰ä¸€å€å¡Šã€æœ€çµ‚é›¢é–‹æ™‚æ•¸å€¼å‰›å¥½è§¸ç™¼æ™‚é«˜éã€Œå¤§æ–¼è¦–è§’å€å¡Šã€å°±æœƒè®“æ•´å€‹å€å¡Šå¡åœ¨ä¸Šä¸€å€‹çµæœï¼Œé›¢é–‹æ™‚æ‰èƒ½æ›´æ–° ğŸ˜…ã€‚

![å¤§æ–¼è¦–è§’çš„å€å¡Šåªæœƒé€²å…¥èˆ‡é›¢é–‹æ™‚è§¸ç™¼ï¼Œæ™‚æ©Ÿä¸ä¸€æ¨£å¯èƒ½å°±æœƒè¢«å…¶ä»–å€å¡Šé›¢é–‹æ™‚çš„ ratio çµ¦è“‹é](ratio-demo.webp 'å¤§æ–¼è¦–è§’çš„å€å¡Šåªæœƒé€²å…¥èˆ‡é›¢é–‹æ™‚è§¸ç™¼ï¼Œæ™‚æ©Ÿä¸ä¸€æ¨£å¯èƒ½å°±æœƒè¢«å…¶ä»–å€å¡Šé›¢é–‹æ™‚çš„ ratio çµ¦è“‹é')

ç”±æ–¼ã€Œè¶…éè¦–è§’çš„å€å¡Šå°±æ˜¯æ²’è¾¦æ³•å¾—å‡ºæ­£ç¢ºçš„æ¯”ä¾‹åªèƒ½åœ¨é€²å…¥èˆ‡é›¢é–‹æ™‚è§¸ç™¼ã€æ˜¯ Intersection Observer çš„é æœŸè¡Œç‚ºï¼Œå¿™äº†ä¸€å¤§åœˆæ‰ç™¼ç¾é‚„æ˜¯å¾—è½‰ç”¨è¼ƒç‚ºéˆæ´»çš„èˆŠæ–¹æ³•ï¼šåœ¨æ¯æ¬¡æ»‘å‹•æ™‚æŸ¥çœ‹å€å¡Šå…ƒç´ çš„è³‡æ–™ä¸¦è¨ˆç®—å‡ºå€å¡Šå·²é¡¯ç¤ºçš„æ¯”ä¾‹ï¼š

```ts
if (tocElement) {
  generateToc(tocElement, targetSectionElements);
  window.addEventListener('scroll', updateVisibleSections);
  window.addEventListener('resize', updateVisibleSections);
  updateVisibleSections();
}
```

```ts
function updateVisibleSections() {
  const windowHeight = window.innerHeight;

  targetSectionElements.forEach((section) => {
    const rect = section.getBoundingClientRect();
    const sectionId = section.getAttribute('id');
    if (!sectionId) return;

    // è¦–çª—ä¸­å¯è¦‹é«˜åº¦ = å–å€å¡Šåº•éƒ¨ç›¸å°æ–¼è¦–çª—é ‚éƒ¨çš„è·é›¢ï¼Œè‡³å¤šæ˜¯è¦–çª—é«˜åº¦ - å–å€å¡Šé ‚éƒ¨ç›¸å°æ–¼è¦–çª—é ‚éƒ¨çš„è·é›¢ï¼Œè‡³å°‘æ˜¯ 0
    const visibleHeight = Math.min(rect.bottom, windowHeight) - Math.max(rect.top, 0);
    // è¦–çª—ä¸­å¯è¦‹é«˜åº¦ / å…ƒç´ é«˜åº¦ = å…ƒç´ å‡ºç¾æ¯”ä¾‹
    const elementInViewportRatio = visibleHeight / rect.height;

    if (elementInViewportRatio > 0) {
      updateActiveTocWithRatio(sectionId, elementInViewportRatio);
    } else {
      const targetSectionIdIndex = activeTocs.findIndex((toc) => toc.id === sectionId);
      if (targetSectionIdIndex !== -1) {
        activeTocs.splice(targetSectionIdIndex, 1);
      }
    }
  });

  updateActiveTocItem();
}
```

æœ€çµ‚å¯ä»¥ç•™æ„æ›¿è§¸ç™¼äº‹ä»¶æ·»åŠ [ç¯€æµ](/post/learn-debounce-and-throttle/#ç¯€æµ-throttle)èˆ‡è¨˜å¾—ç§»é™¤äº‹ä»¶ç›£è½å™¨ï¼Œé€™æ¨£å°±å¯ä»¥é¿å…ä¸å¿…è¦çš„è¨ˆç®—æé«˜æ•ˆèƒ½ã€‚

### æ€è€ƒï¼šå€å¡Šé¡¯ç¤ºçš„æ¯”ä¾‹ä¸ä»£è¡¨æœ€ç›¸é—œçš„å€å¡Š

![æ¯å€‹å€å¡Šæ ¹æ“šå¤§å°è¨ˆç®—å‡ºä¾†çš„æ¯”ä¾‹ä¸ç­‰å€¼](ratio-calc.webp 'æ¯å€‹å€å¡Šæ ¹æ“šå¤§å°è¨ˆç®—å‡ºä¾†çš„æ¯”ä¾‹ä¸ç­‰å€¼')

Intersection Observer çš„ `threshold` åªåœ¨å…ƒç´ é¡¯ç¤ºç‰¹å®šæ¯”ä¾‹æ™‚è§¸ç™¼ï¼Œé‚£éº¼æ¯å€‹å€å¡Šä¹‹é–“çš„æ¯”ä¾‹ç­‰å€¼å—ï¼Ÿèˆ‰ä¾‹ä¾†èªªå¦‚æœ `A` å€å¡Š `10px` ç¶“éå®ƒ `10%` åªéœ€è¦ `1px` çš„æ»‘å‹•ï¼Œä½† `B` å€å¡Š `1000px` ç¶“éå®ƒ `10%` å‰‡éœ€è¦ `100px` çš„æ»‘å‹•ã€‚

é€™éº¼èªª `A` `B` å€å¡Šåœ¨ç•«é¢ä¸­éœ€è¦å‡ºç¾ä¸ä¸€æ¨£çš„ç¨‹åº¦æ‰èƒ½è¢«æ¿€æ´»ï¼ˆ`1px`ã€`100px`ï¼‰ï¼Œä½†ä½¿ç”¨è€…æ‡‰è©²æ˜¯ **èªå…ƒç´ åœ¨è¦–è§’çš„æ¯”ä¾‹** è§£è®€ç›¸é—œæ€§æ‰å°ï¼Œèˆ‰ä¾‹è¦–è§’ `1000px` é‚£éº¼é¡¯ç¤ºäº†è¶…éè¦–è§’ `10%` çš„å€å¡Šæ‰ç®—æ˜¯ç›¸é—œçš„å€å¡Šä¹Ÿå°±æ˜¯ `100px`ï¼Œåœ¨é€™æ¨£çš„å ´åˆä¸‹ `A` å°±æ˜¯éæ—©æ¿€æ´»ã€‚

é€™éº¼èªªæˆ‘å€‘æ‡‰è©²å®Œå…¨ç”¨ **å…ƒç´ åœ¨è¦–è§’çš„æ¯”ä¾‹** ä¾†åšç‚ºæ¿€æ´»çš„ä¾æ“šå—ï¼Ÿæ˜é¡¯ä¹Ÿæ²’è¾¦æ³•ï¼ å› ç‚ºæœ‰çš„å…ƒç´ æœ¬èº«å°±æ˜¯éå¸¸å°ï¼Œé€™æ¨£çš„å…ƒç´ æŒ‰ç…§æ¯”ä¾‹è¨ˆç®—æ°¸é ä¸æœƒè¢«æ¿€æ´»ã€‚æœ€çµ‚æˆ‘çš„è¨ˆç®—æ–¹å¼æ˜¯é€™æ¨£ï¼š

1. åœ¨é€²å…¥ç•«é¢æ™‚ä¾ç…§å…ƒç´ åœ¨è¦–è§’çš„æ¯”ä¾‹æ¿€æ´»
2. å®Œå…¨é€²å…¥åœ¨è¦–è§’å…§æ™‚æ›¿è©²å…ƒç´ è¨­ç½®æœ€é«˜å±¤ç´šçš„æ¿€æ´»ç‹€æ…‹
3. æœ€å¾Œæ–°å¢ä¹‹æœ€é«˜å±¤ç´šçš„æ¿€æ´»ç‹€æ…‹å„ªå…ˆæ¿€æ´»
4. é›¢é–‹ç•«é¢æ™‚å–æ¶ˆæœ€é«˜å±¤ç´šæ¿€æ´»ç‹€æ…‹ä¸¦ä¸”ä¾ç…§å…ƒç´ åœ¨è¦–è§’çš„æ¯”ä¾‹æ¿€æ´»

å…¶å¯¦åªéœ€è¦åœ¨ `updateVisibleSections` å¢æ·»ä¸€é»é‚è¼¯å³å¯ï¼š

```ts {11, 13-18}
function updateVisibleSections() {
  const windowHeight = window.innerHeight;

  targetSectionElements.forEach((section) => {
    const rect = section.getBoundingClientRect();
    const sectionId = section.getAttribute('id');
    if (!sectionId) return;

    const visibleHeight = Math.min(rect.bottom, windowHeight) - Math.max(rect.top, 0);
    const elementInViewportRatio = visibleHeight / windowHeight;
    const elementDisplayedRatio = visibleHeight / rect.height;

    if (elementInViewportRatio > 0) {
      if (elementDisplayedRatio === 1) {
        updateActiveTocWithRatio(sectionId, 1);
      } else {
        updateActiveTocWithRatio(sectionId, elementInViewportRatio);
      }
    } else {
      const targetSectionIdIndex = activeTocs.findIndex((toc) => toc.id === sectionId);
      if (targetSectionIdIndex !== -1) {
        activeTocs.splice(targetSectionIdIndex, 1);
      }
    }
  });
  updateActiveTocItem();
}
```

æœ€å¾Œæ–°å¢ä¹‹æœ€é«˜å±¤ç´šçš„æ¿€æ´»ç‹€æ…‹å„ªå…ˆæ¿€æ´»å¯ä»¥é€éè¨˜éŒ„ä¸€å€‹è§¸ç™¼æ›´æ–°çš„ Timestamp ä¾†åˆ¤æ–·ï¼Œä¸¦ä¸”æ›´æ–°æ•´ç†æ¯”ä¾‹çš„é‚è¼¯ï¼Œå¦‚æœæ¯”ä¾‹ä¸€æ¨£æ™‚å°±æ ¹æ“šè¨»å†Šçš„æ™‚é–“å…ˆå¾Œä¾†æ±ºå®šæ¿€æ´»ç‹€æ…‹ã€‚

```ts {4, 11-14}
function updateActiveTocWithRatio(sectionId: string, ratio: number) {
  const existingItemIndex = activeTocs.findIndex((item) => item.id === sectionId);
  if (existingItemIndex === -1) {
    activeTocs.push({ id: sectionId, ratio, timeStamp: Date.now() });
  } else {
    activeTocs[existingItemIndex].ratio = ratio;
  }

  activeTocs.sort((a, b) => {
    if (a.ratio === b.ratio) {
      return b.timeStamp - a.timeStamp;
    }
    return b.ratio - a.ratio;
  });

  updateActiveTocItem();
}
```

### æ€è€ƒï¼šé»æ“Šæ¿€æ´»çš„å€å¡Šå¾Œæ»‘å‹•åˆ°çš„å°æ‡‰çš„ä½ç½®ä¸¦ä¸ä¸€å®šæ˜¯å°æ‡‰ä½ç½®

ç›®å‰æ¿€æ´»ç‹€æ…‹æ˜¯æ ¹æ“šå€å¡Šåœ¨ç•«é¢ä¸­çš„æ¯”ä¾‹ä¾†æ±ºå®šçš„ï¼Œå¦‚æœç›¸åŒæ‰æ ¹æ“šè¨»å†Šçš„æ™‚é–“ä¾†æ±ºå®šï¼Œä½†é€™æ¨£ä»èˆŠæœƒç™¼ç”Ÿé»æ“Šæ»‘å‹•å¾Œåˆ°é”çš„ä½ç½®è§¸ç™¼äº†æ–°çš„æ¿€æ´»ç‹€æ…‹ï¼Œé€™æ¨£æœƒè®“ä½¿ç”¨è€…æ„Ÿåˆ°å›°æƒ‘æ˜æ˜é»äº† `A` å»æ»‘å‹•æ¿€æ´»äº†ä¹‹å¾Œçš„ `C`ã€‚
æˆ‘çš„ä½œæ³•æ˜¯é¡å¤–è¨­ç½®ä¸€å€‹è®Šæ•¸ï¼š`forceActiveTocId`ï¼Œä¸¦ä¸”åœ¨ç”Ÿæˆ

```ts
// åˆå§‹åŒ– TocLink æ™‚ç¶å®šé»æ“Šäº‹ä»¶ï¼Œç¢ºä¿é»æ“Šæ™‚è¨»å†Š `forceActiveTocId`
tocLink.addEventListener('click', (e) => {
  forceActiveTocId = sectionId;
  const activeToc = activeTocs.find((item) => item.id === sectionId);
  if (activeToc) {
    activeToc.timeStamp = Date.now();
  }
  activeTocs = reorderActiveToc(activeTocs);
  updateActiveTocItem();
  updateDebugDisplay();
});

// ç¨ç«‹å‡ºå‡½å¼å°ˆé–€è™•ç† TOC æ’åº
function reorderActiveToc(activeTocs: activeToc[]) {
  return [...activeTocs].sort((a, b) => {
    // å¦‚æœ a æ˜¯å¼·åˆ¶æ¿€æ´»çš„ï¼Œå°‡å…¶æ’åœ¨å‰é¢
    if (a.id === forceActiveTocId) return -1;
    if (a.ratio === b.ratio) {
      return b.timeStamp - a.timeStamp;
    }
    return b.ratio - a.ratio;
  });
}
```

{/* prettier-ignore */}
<p class="codepen" data-height="300" data-default-tab="result" data-slug-hash="gOVawBp" data-pen-title="final - Real use case of intersection observer: Table of Contents" data-preview="true" data-editable="true" data-user="riecball" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/riecball/pen/gOVawBp">
  final - Real use case of intersection observer: Table of Contents</a> by Riceball (<a href="https://codepen.io/riecball">@riecball</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>

## ç¸½çµ

ç¸½çµä¾†èªªä¸€å€‹è‰¯å¥½çš„ TOC æ‡‰è©²è¦èƒ½ï¼š

1. é»æ“Šé€£çµæ»‘å‹•åˆ°é©ç•¶çš„ä½ç½®
2. æ¿€æ´»æ¨£å¼èƒ½åæ˜ ç•¶å‰æ»‘å‹•ä½ç½®

å¦‚æœä½ çš„ TOC åœ¨è¨­è¨ˆä¸Šå¸Œæœ›åªæœ‰ä¸€å€‹æ¿€æ´»é …ç›®ï¼Œé‚£éº¼å¾ˆæœ‰å¯èƒ½æœƒç¢°ä¸Šä¸€äº›æŠ€è¡“ä¸Šé›£ä»¥å…‹æœçš„é«”é©—å•é¡Œï¼Œéœ€è¦å®šç¾©æ›´å¤šçš„åˆ¤æ–·ä¾†å®Œå–„é«”é©—ï¼Œä¾‹å¦‚ï¼šæ»‘åˆ°æœ€å¾Œä¸€å€‹å€å¡Šæ™‚åˆ°é”é é¢åº•éƒ¨ï¼Œç„¡æ³•å†æ»‘å‹•ï¼Œå› æ­¤åº•éƒ¨çš„å€å¡Šæ°¸é ç„¡æ³•è¢«æ¿€æ´»ï¼ˆç‰½æ‰¯å›å¦‚æœæœ‰å¤šå€‹æ¿€æ´»ä»€éº¼æ‰æ˜¯å°ç”¨æˆ¶æœ€ç›¸é—œçš„å€å¡Šï¼Ÿï¼‰

å…¶å¯¦æˆ‘èªç‚ºåˆ°é€™å€‹ç¨‹åº¦å·²ç¶“ç®—æ˜¯ä¸€å€‹ä¸éŒ¯çš„ TOC äº†ï¼Œå¯ä»¥å†æ ¹æ“šè‡ªå·±çš„éœ€æ±‚ä¿®æ”¹æ·»åŠ è‡ªå·±çš„å®šç¾©ã€‚

## å»¶ä¼¸é–±è®€

å¦‚æœå°æ–¼åµæ¸¬å…ƒç´ æ˜¯å¦é€²å…¥è¦–çª—æ„Ÿèˆˆè¶£å¯ä»¥åƒè€ƒä»¥ä¸‹æ–‡ç« ï¼Œä½¿ç”¨ä¸åŒæ–¹å¼åµæ¸¬ï¼Œä¸¦ä¸”ä¹Ÿæœ‰è©³ç´°çš„äº’å‹•æ•™å­¸ï¼š

- [Check if an element is visible in the viewport - Phuoc Nguyen](https://phuoc.ng/collection/intersection-observer-with-react/check-if-an-element-is-visible-in-the-viewport/)
- [An introduction to the IntersectionObserver API - Phuoc Nguyen](https://phuoc.ng/collection/intersection-observer-with-react/an-introduction-to-the-intersection-observer-api/)
