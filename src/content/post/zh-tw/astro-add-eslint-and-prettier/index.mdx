---
isDraft: false
icon: { name: 'devicon-plain:astro', title: 'Astro Logo ç¬¦è™Ÿ' }
subHeadline: 'Day24 - Astro Series: Add ESLint and Prettier'
headline: 'Astro ç³»åˆ—æ–‡ç¬¬äºŒåå››æ—¥ï¼šæ·»åŠ  ESLint èˆ‡ Prettier'
excerpt: 'æˆ‘å–œæ­¡ä½¿ç”¨è‡ªå‹•åŒ–çš„å·¥å…·ä¾†ç‚ºå°ˆæ¡ˆçš„ä»£ç¢¼æä¾›éŒ¯èª¤æª¢æŸ¥èˆ‡æ•´ç†ï¼Œå› æ­¤ä½¿ç”¨ ESLint èˆ‡ Prettier è®“æ’°å¯«çš„ä»£ç¢¼æ›´ä¸€è‡´ç„¡éŒ¯ï¼Œé‚„æœ‰é¡å¤–æ·»åŠ  TypeScript çš„æª¢æŸ¥èˆ‡ VSCode æç¤ºã€‚æœ¬ç¯‡æ–‡ç« å°‡å¸¶ä½ èªè­˜æˆ‘å¦‚ä½•æ›¿è‡ªå·±çš„ Astro éƒ¨è½æ ¼æ·»åŠ  ESLint èˆ‡ Prettierã€‚'
series: 2023 iThome éµäººè³½ - Astro
category: 'Astro'
tags: ['ç³»åˆ—æ–‡']
publishDate: 2023-10-09
---

![ä¸€å€‹æ¼‚äº®çš„æ¼¸å±¤èƒŒæ™¯ä¸Šé¢æœ‰ä¸€å¥æ¨™é¡Œï¼šã€Œæ·»åŠ  ESLint èˆ‡ Prettier ã€](./day24-add-eslint-and-prettier.webp)

## å‰è¨€

æˆ‘å–œæ­¡ä½¿ç”¨è‡ªå‹•åŒ–çš„å·¥å…·ä¾†ç‚ºå°ˆæ¡ˆçš„ä»£ç¢¼æä¾›éŒ¯èª¤æª¢æŸ¥èˆ‡æ•´ç†ï¼Œå› æ­¤ä½¿ç”¨ ESLint èˆ‡ Prettier è®“æ’°å¯«çš„ä»£ç¢¼æ›´ä¸€è‡´ç„¡éŒ¯ï¼Œé‚„æœ‰é¡å¤–æ·»åŠ  TypeScript çš„æª¢æŸ¥èˆ‡ VSCode æç¤ºã€‚

## ä½¿ç”¨å¥—ä»¶èªªæ˜

ä»¥ä¸‹æ˜¯éœ€è¦å®‰è£çš„å¥—ä»¶åç¨±èˆ‡ç”¨é€”ï¼Œé€™è£¡æˆ‘é¸æ“‡ä½¿ç”¨ TypeScript èˆ‡ Airbnb é¢¨æ ¼çš„è¨­å®šæª”ï¼Œå¯ä»¥è‡ªè¡Œæ±ºå®šæ›´æ›åˆé©è‡ªå·±çš„è¨­ç½®ã€‚

- [eslint](https://eslint.org/) - æª¢æŸ¥ä¸¦ä¿®å¾©ä»£ç¢¼å•é¡Œ
- [eslint-config-airbnb-base](https://github.com/airbnb/javascript) - è®“ ESLint ä»¥ Airbnb è¦ç¯„æª¢æŸ¥
- [eslint-plugin-astro](https://github.com/ota-meshi/eslint-plugin-astro): è®“ ESLint å…¼å®¹ Astro
- [eslint-plugin-jsx-a11y](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y): è®“ ESLint æª¢æŸ¥ JSX çš„ç„¡éšœç¤™æ€§å•é¡Œ
- [@typescript-eslint/parser](https://github.com/typescript-eslint/typescript-eslint)ï¼š è®“ ESLint å…¼å®¹ TypeScript
- [eslint-plugin-import](https://github.com/import-js/eslint-plugin-import) - è®“ ESLint æª¢æŸ¥ imports
- [prettier](https://prettier.io/) - æ•´ç†ä»£ç¢¼
- [prettier-plugin-astro](https://github.com/withastro/prettier-plugin-astro) - è®“ Prettier å…¼å®¹ Astro
- [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier) - è®“ ESLint èˆ‡ Prettier ç›¸äº’å…¼å®¹

## å®‰è£å¥—ä»¶

åœ¨å°ˆæ¡ˆä½ç½®åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤å®‰è£å‰è¿°çš„æ‰€æœ‰å¥—ä»¶ï¼š `npm install --save-dev @typescript-eslint/parser eslint eslint-config-airbnb-base eslint-config-prettier eslint-plugin-astro eslint-plugin-import eslint-plugin-jsx-a11y prettier prettier-plugin-astro`ã€‚

## è¨­å®šå¥—ä»¶

å‰µå»º `eslintrc.cjs` æª”æ¡ˆä¸¦æ”¾ç½®åœ¨å°ˆæ¡ˆçš„æ ¹éƒ¨ï¼š

```json
module.exports = {
  extends: ['airbnb-base', 'plugin:astro/recommended', 'plugin:astro/jsx-a11y-recommended', 'prettier'],
  // ...
  overrides: [
    {
      files: ['*.astro'],
      parser: 'astro-eslint-parser',
      parserOptions: {
        parser: '@typescript-eslint/parser',
        extraFileExtensions: ['.astro'],
      },
      rules: {},
    },
  ],
};

```

å‰µå»º `prettierrc.cjs` æª”æ¡ˆä¸¦æ”¾ç½®åœ¨å°ˆæ¡ˆçš„æ ¹éƒ¨ï¼Œè¨­ç½®åˆé©çš„é¢¨æ ¼æ¨£å¼ï¼š

```json
module.exports = {
  trailingComma: 'all',
  tabWidth: 2,
  semi: true,
  singleQuote: true,
  printWidth: 120,
  bracketSpacing: true,
};

```

å‰µå»º `settings.json` æª”æ¡ˆä¸¦æ”¾ç½®åœ¨å°ˆæ¡ˆçš„æ ¹éƒ¨çš„ `.vscode` è³‡æ–™å¤¾ï¼Œé€™æ¨£å¯ä»¥æé†’ VSCode ä½¿ç”¨ ESLint ä½œç‚º Formatter çš„æ™‚å€™è¦é©—è­‰çš„æª”æ¡ˆç¨®é¡ï¼š

```json
{
  "eslint.validate": ["javascript", "javascriptreact", "astro", "typescript", "typescriptreact"]
}
```

æœ€å¾Œå¯ä»¥å¢åŠ ä¸€äº› [NPM Script](https://docs.npmjs.com/cli/v9/using-npm/scripts) ç•¶æƒ³è¦æ‰‹å‹•åŸ·è¡Œ ESLint æˆ– Prettier æª¢æŸ¥çš„æ™‚å€™å°±å¯ä»¥åŸ·è¡Œ `npm run lint` æˆ– `npm run prettier`ï¼Œåœ¨ `package.json` ä¸­æ·»åŠ ä»¥ä¸‹å…©è¡ŒæŒ‡ä»¤ï¼š

```json
"scripts": {
  // ...
  "lint": "eslint src/**/*.{js,astro}",
  "prettier": "prettier src/**/*.{js,astro}"
}

```

æ­¤å¤–å¦‚æœæœ‰ç”¨ [Alias](https://docs.astro.build/en/guides/aliases/) é‚„å¯ä»¥å†å®‰è£ `eslint-import-resolver-alias` å¥—ä»¶ï¼Œé€™æ¨£ä½¿ç”¨ Alias è·¯å¾‘çš„æ™‚å€™å°±æœƒè¢« ESLint èªå¾—ï¼Œä¸æœƒå‡ºç¾éŒ¯èª¤ã€‚

```jsx
  settings: {
    'import/resolver': {
      alias: {
        map: [['@', './src']],
        extensions: ['.astro', '.ts', '.tsx', '.js', '.jsx', '.json', '.vue'],
      },
    },
  },

```

é€™æ¨£ä¸€ä¾†åªè¦è¼¸å…¥ `@` å°±èƒ½å¤ ä»£è¡¨ `src` è³‡æ–™å¤¾ï¼Œä¸ç”¨å†æ ¹æ“šæª”æ¡ˆç›¸å°ä½ç½®æ’°å¯«ç¹é›œçš„è·¯å¾‘äº†ï¼

```jsx
<!-- ğŸ˜ -->
import Card from '@/components/Card.astro';
<!-- ğŸ˜« -->
import Card from '../../components/Card.astro'

```

## çµèª

ç¶“éä»¥ä¸Šçš„è¨­å®šï¼Œæ•´å€‹å°ˆæ¡ˆå°±æœ‰å®Œç¾çš„æ•´ç†èˆ‡æç¤ºäº†ï¼Œæœ‰å•é¡Œå¯ä»¥è§€å¯Ÿæˆ‘åœ¨è‡ªå·±çš„å°ˆæ¡ˆä¸­çš„ [Commit](https://github.com/riceball-tw/wei-wei-web/commit/09005f3a1021dd5b1f27bb8a24679d96cca3b04e) ç¯„ä¾‹ï¼Œæˆ–æ˜¯åœ¨åº•ä¸‹ç•™è¨€è™•è©¢å•ã€‚

## å»¶ä¼¸é–±è®€

- [Day24 - æ·»åŠ  ESLint èˆ‡ Prettier](https://ithelp.ithome.com.tw/articles/10336866) - ç›¸åŒæ–‡ç« åŒæ­¥ç™¼å¸ƒæ–¼ iThome éµäººè³½ä¸­
