---
isDraft: false
icon:
  name: material-symbols:manage-search-rounded
  title: æ–‡ç« æœå¯»ç¬¦å·
subHeadline: How to Add Search to Any Kind of Static Site Using Pagefind
headline: ä½¿ç”¨ Pagefind æ›¿ä»»ä½•é™æ€ç½‘ç«™æ·»åŠ æœå¯»åŠŸèƒ½
excerpt: ä¸åˆ° 3 æ­¥éª¤è®©ä½ çš„ç½‘ç«™æ‹¥æœ‰ä»¥ WebAssembly é«˜æ•ˆé©±åŠ¨çš„å®¢åˆ¶åŒ–æœå¯»åŠŸèƒ½ã€‚é™æ€ç½‘ç«™åƒæ˜¯éƒ¨è½æ ¼ã€æ–‡ä»¶ã€ä¸ªäººç½‘ç«™ã€å…¬å¸ç½‘ç«™â€¦â€¦ç­‰è¿™ç±»é˜…è¯»ä½“éªŒä¸ºä¸»çš„ç½‘ç«™é€šå¸¸éƒ½æœ‰æœå¯»å†…å®¹çš„éœ€æ±‚ï¼Œæ°é€¢ Pagefind 1.0 çš„æ¨å‡ºæˆ‘æŠŠåŸå…ˆè‡ªåˆ¶çš„fuse.js æœå¯»åŠŸèƒ½æ¢æˆPagefindï¼Œåˆ†äº«å¦‚ä½•åœ¨ä»»ä½•é™æ€ç½‘ç«™ä¸ŠåŠ å…¥æœå¯»åŠŸèƒ½ã€‚
category: Technical Discussion
publishDate: 2024-04-13
---

## å‰è¨€

![åŸå…ˆå­˜åœ¨äºå¯¼è§ˆåˆ—çš„ Fuse.js æœå¯»åŠŸèƒ½](./fuse-search.webp 'åŸå…ˆå­˜åœ¨äºå¯¼è§ˆåˆ—çš„ Fuse.js æœå¯»åŠŸèƒ½')

å¦‚æœä½ æ˜¯ç½‘é¡µä¸œä¸œè¾ƒæ—©æœŸçš„è¯»è€…å¯èƒ½ä¼šå‘ç°å¯¼è§ˆåˆ—åŸå…ˆçš„æœå¯»åŠŸèƒ½ä¸è§äº†ï¼Œè¿™æ˜¯å› ä¸ºè¿‘æœŸæŠŠä½¿ç”¨ [Fuse.js](https://www.fusejs.io/)ï¼ˆæ¨¡ç³Šæœå¯»å¥—ä»¶ï¼‰åˆ¶ä½œçš„æœå¯»åŠŸèƒ½æ”¹ä¸ºä½¿ç”¨ [pagefind](https://pagefind.app/) æ¥å®ç°ç½‘ç«™çš„æœå¯»åŠŸèƒ½ã€‚

Fuse.js å…¶å®å·²ç»è¶³å¤Ÿå½“å‰ç½‘ç«™çš„æœå¯»éœ€æ±‚ï¼Œä½†å¯ä»¥é¢„æœŸç½‘ç«™å¤§ä¸€ç‚¹å°±ä¼šé‡ä¸Šç“¶é¢ˆï¼Œåˆç¢°å·§é‡ä¸Š pagefind 1.0 çš„æ¨å‡ºï¼Œå°±å†³å®šæŠŠåŸå…ˆçš„æœå¯»åŠŸèƒ½æ¢æˆ pagefindï¼Œå½“ç„¶èƒŒåè¿˜æœ‰ä¸€äº›é¢å¤–çš„åŸå› ï¼Œåƒæ˜¯æˆ‘æƒ³ç§»é™¤åŸå…ˆåˆ¶ä½œ UI æ‰€ç”¨åˆ°çš„ [preact](https://preactjs.com/)ã€‚

## å…³äº pagefind

pagefind æ˜¯ä¸€ä¸ªä»¥ Rust ç¼–å†™å¹¶ä¸”é€è¿‡æ‰§è¡Œ WebAssembly æ¥å®ç°çš„æœå¯»å¥—ä»¶ï¼Œå®ƒçš„è¯ç”ŸåŸå› ä»ä¸€å¼€å§‹å°±éå¸¸æ˜ç¡®ï¼šæ›¿ä»»ä½•é™æ€ç½‘é¡µæä¾›ç°æˆå¯ç”¨çš„æœå¯»æ–¹æ¡ˆã€‚

- æœå¯»å¿«é€Ÿ
- æä¾›ç°æˆ UI
- æ”¯æ´ä¸­æ—¥è¯­ç³»æœå¯»
- æ”¯æ´ä»»ä½•é™æ€æ–‡ä»¶æœå¯»
- æ”¯æ´ [åˆ†ç±»](https://pagefind.app/docs/filtering/)ã€[æ’åº](https://pagefind.app/docs/sorts/)ã€[è‡ªå®šä¹‰æœå¯»èµ„æ–™](https://pagefind.app/docs/metadata/)ã€[ç´¢å¼•é‡è¦ç¨‹åº¦æ ‡æ³¨](https://pagefind.app/docs/weighting/)

è®©æˆ‘æ„Ÿè§‰åˆ°è¿™æ˜¯ä¸€ä¸ªè¶³å¤Ÿæˆç†Ÿå¯å³ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤å†³å®šé‡‡çº³ pagefind æ¥å®ç°è¿™ä¸ª Astro é™æ€ç½‘ç«™çš„æœå¯»åŠŸèƒ½ã€‚

## ç¬¬ä¸€æ­¥ï¼š[å»ºç«‹ç´¢å¼•](https://pagefind.app/docs/running-pagefind/)

pagefind çš„è¿ä½œåŸç†ååˆ†ç®€å•ï¼Œåªéœ€è¦[å¯¹ç”Ÿæˆå¥½çš„é™æ€ç½‘ç«™å»ºç«‹ç´¢å¼•](https://pagefind.app/docs/running-pagefind/)å³å¯ï¼Œç´¢å¼•å…¶å®å°±æ˜¯ä¸€ä¸ª`pagefind` èµ„æ–™å¤¹é‡Œé¢è£…æ»¡äº† pagefind æ‰€éœ€è¦ç”¨åˆ°çš„æ¡£æ¡ˆï¼Œ
è¿‡ç¨‹æ— é¡»å®‰è£…ç›¸å…³å¥—ä»¶ï¼Œåªéœ€è¦æ‰§è¡Œ`npx -y pagefind --site public --serve` å°±å¯ä»¥åŠæ—¶ä¸‹è½½ pagefind å¹¶ä¸”å»ºç«‹ç´¢å¼•ï¼Œæˆ‘å°†è¿™ä¸ªæµç¨‹æ”¾ç½®åœ¨[å»ºæ„å®Œæˆç½‘ç«™ä¹‹å](https://github.com/riceball-tw/web-dong-blog/blob/e599c15cb93ce08cb5cbbc1a51291ea39b1d35f1/package.json#L9)ã€‚

å»ºæ„å®Œæˆä¼šå¾—åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ç»“æœï¼Œå¹¶ä¸”å¤šå‡ºä¸€ä¸ª `pagefind` èµ„æ–™å¤¹ï¼š

```bash
Running Pagefind v1.1.0 (Extended)
Running from: "D:\\USER\\Desktop\\astro-blog"
Source:       "dist"
Output:       "dist\\pagefind"

[Walking source directory]
Found 221 files matching **/*.{html}

[Parsing files]
Found a data-pagefind-body element on the site.
â†³ Ignoring pages without this tag.

[Reading languages]
Discovered 1 language: zh-hant-tw

[Building search indexes]
Total:
  Indexed 1 language
  Indexed 123 pages
  Indexed 5640 words
  Indexed 2 filters
  Indexed 1 sort

Finished in 1.503 seconds
```

è¿™é‡Œä½¿ç”¨ `Extended` ç‰ˆæœ¬ï¼Œæ„å‘³ç€è¿™ä¸ªç‰ˆæœ¬é’ˆå¯¹ä¸­æ–‡ä¸æ—¥æ–‡è¿™æ ·[ç‰¹æ®Šè¯­è¨€](https://pagefind.app/docs/multilingual/#specialized-languages)æœ‰ç‰¹åˆ«æ”¯æŒï¼Œå¦‚æœåšå®¢ä½¿ç”¨è¿™ç±»è¯­è¨€å¯ä»¥ç‰¹åˆ«ç•™æ„ä½¿ç”¨è¯¥ç‰ˆæœ¬ã€‚

## ç¬¬äºŒæ­¥ï¼š[æ·»åŠ æœç´¢åŠŸèƒ½](https://pagefind.app/docs/)

Pagefind å¾ˆè´´å¿ƒçš„è‡ªå¸¦ç°æˆçš„æœç´¢ UIï¼Œå¹¶ä¸”åŒ…å«äº†ç‚¹å‡»åŠ è½½çš„åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨æƒ³è¦æ·»åŠ æœç´¢çš„é¡µé¢ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç å³å¯åˆ›å»ºæœç´¢åŠŸèƒ½ï¼š

```html
<link href="/pagefind/pagefind-ui.css" rel="stylesheet" />
<script src="/pagefind/pagefind-ui.js"></script>
<div id="search"></div>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    // æ›¿æ¢ #search ä¸ºä½ æƒ³è¦æ”¾ç½®æœç´¢çš„å…ƒç´ 
    new PagefindUI({ element: '#search', showSubResults: true });
  });
</script>
```

ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ç°æˆ UIï¼Œè€Œæ˜¯å•çº¯çš„ä½¿ç”¨ pagefind çš„æœç´¢åŠŸèƒ½ï¼Œå¹¶å–å¾—æœç´¢ç»“æœï¼š

```javascript
const pagefind = await import('/pagefind/pagefind.js');
const search = await pagefind.search('static');
```

## æ€»ç»“

ä¸åˆ° 3 æ­¥éª¤ä½ çš„ç½‘ç«™å°±ç«‹åˆ»æœ‰ä»¥ WebAssembly é«˜æ•ˆé©±åŠ¨çš„å®¢åˆ¶åŒ–æœç´¢åŠŸèƒ½äº† ğŸ™ŒğŸ»ï¼ä½ å¯èƒ½ä¼šæƒ³è¦æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œä¸€äº›å®¢åˆ¶åŒ–è®¾ç½®ï¼Œåƒæ˜¯è¿™ä¸ªåšå®¢æœ‰å¯¹ pagefind åšä¸€äº›é¢å¤–çš„è®¾ç½®ï¼š

- [ä¿®æ”¹é»˜è®¤ UI æ ·å¼ä»¥åŒ¹é…ç½‘ç«™é£æ ¼](https://pagefind.app/docs/ui-usage/#customising-the-styles)
- [ä¾ç…§æ—¶é—´åˆ†ç±»æœç´¢ç»“æœ](https://pagefind.app/docs/sorts/)
- [æ ¹æ®ç°æœ‰åˆ†ç±»ç³»ç»Ÿè¿›è¡Œæœç´¢åˆ†ç±»](https://pagefind.app/docs/filtering/)

![ç½‘é¡µä¸œä¸œé¦–é¡µæœç´¢èŒƒä¾‹](./webdong-homepage.webp)

## å»¶ä¼¸é˜…è¯»

- ç»†èŠ‚å¦‚ä½•åœ¨é™æ€ç½‘ç«™åŠ å…¥ Fuse.js æœç´¢åŠŸèƒ½å¯ä»¥å‚è€ƒï¼š[Astro ç³»åˆ—æ–‡ç¬¬äºŒåæ—¥ï¼šå®ä½œæœç´¢åŠŸèƒ½](/post/astro-search-functionality/)
