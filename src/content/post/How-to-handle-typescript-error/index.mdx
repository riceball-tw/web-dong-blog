---
isDraft: false
featureIcon: { url: 'images/icons/warning-hex.svg', alt: 'å…­è§’å½¢å¤–æ¡†ä¸­é–“æœ‰é©šå˜†è™Ÿçš„ç¬¦è™Ÿ' }
title: 'How to handle TypeScript error'
titleTC: 'å¦‚ä½•è™•ç† TypeScript æ‹‹å‡ºçš„éŒ¯èª¤ï¼Ÿ'
excerpt: 'JavaScript æœ‰ try...catch èªæ³•ç”¨æ–¼æ•æ‰ç¨‹å¼ä¸­çš„éŒ¯èª¤æƒ…å¢ƒï¼Œåœ¨éœ€è¦æ™‚ä½¿ç”¨ throw èªæ³•ä¾†æ‹‹å‡ºã€Œä»»ä½•éŒ¯èª¤ã€ï¼Œé€šå¸¸å»ºè­°æœƒä¸Ÿå‡º JS é è¨­çš„éŒ¯èª¤ç‰©ä»¶ï¼Œä½†åœ¨ TypeScript è¦æ€éº¼åšæ‰èƒ½ç¢ºä¿æ‹‹å‡ºçš„éŒ¯èª¤çš„å‹åˆ¥ï¼Ÿ'
category: 'TypeScript'
tags: ['éŒ¯èª¤è™•ç†']
publishDate: 2024-03-30
---

## å•é¡Œ

JavaScript æœ‰ `try...catch` èªæ³•ç”¨æ–¼æ•æ‰ç¨‹å¼ä¸­çš„éŒ¯èª¤æƒ…å¢ƒï¼Œåœ¨éœ€è¦æ™‚ä½¿ç”¨ `throw` èªæ³•ä¾†æ‹‹å‡ºã€Œä»»ä½•éŒ¯èª¤ã€ï¼Œé€šå¸¸å»ºè­°æœƒä¸Ÿå‡º [JS é è¨­çš„éŒ¯èª¤ç‰©ä»¶](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)å¦‚ä¸‹ï¼š

```js
// æ‹‹å‡º JS éŒ¯èª¤ç‰©ä»¶
try {
  throw new Error('éŒ¯èª¤è¨Šæ¯');
} catch (error) {
  console.error(error.message);
}

// æ‹‹å‡ºå­—ä¸²
try {
  throw 'éŒ¯èª¤è¨Šæ¯';
} catch (error) {
  console.error(error);
}
```

æˆ‘å€‘è¦å¦‚ä½•åœ¨ TypeScript ä¸­æ­£ç¢ºçš„è­˜åˆ¥éŒ¯èª¤çš„å‹åˆ¥å‘¢ï¼Ÿç”±æ–¼ã€Œä»»ä½•éŒ¯èª¤ã€éƒ½å¯ä»¥è¢«æ‹‹å‡ºï¼Œæ‰€ä»¥ TypeScript æœƒå°‡ `catch` æ¥æ”¶åˆ°çš„éŒ¯èª¤ç‰©ä»¶è¦–ç‚º `unknow`ï¼Œé€™æ¨£æœƒè®“æˆ‘å€‘åœ¨é–‹ç™¼æ™‚ç„¡æ³•æ­£ç¢ºçš„åˆ¤æ–·éŒ¯èª¤ã€‚

## è§£æ–¹

### è§£æ–¹ä¸€ï¼šæ¥å—éŒ¯èª¤ç‚º `Any`

åœ¨ TypeScript ä¸­ï¼Œæˆ‘å€‘å¯ä»¥å°‡ `catch` æ¥æ”¶åˆ°çš„éŒ¯èª¤ç‰©ä»¶è¦–ç‚º `any` å‹åˆ¥ï¼Œé€™æ¨£å°±å¯ä»¥æ¥å—ä»»ä½•å‹åˆ¥çš„éŒ¯èª¤ç‰©ä»¶ã€‚

```ts
try {
  throw new Error('éŒ¯èª¤è¨Šæ¯');
} catch (error: any) {
  console.error(error.message);
}
```

å•é¡Œæ˜¯é€™éº¼åšå’Œæ²’ç”¨ TypeScript ä¸€æ¨£ ğŸ˜…ï¼Œç„¡æ³•å¾—çŸ¥éŒ¯èª¤è³‡è¨Šçš„å‹åˆ¥ã€‚

### è§£æ–¹äºŒï¼šæ–·è¨€éŒ¯èª¤é¡å‹

ç”±æ–¼æˆ‘å€‘äº‹å…ˆçŸ¥é“æ•´æ®µç¨‹å¼ç¢¼ä¸­åªè¦éŒ¯èª¤å°±æœƒæ‹‹å‡º `Error` ç‰©ä»¶ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ `as` é—œéµå­—ä¾†æ–·è¨€æ•æ‰åˆ°çš„éŒ¯èª¤å¿…å®šæ˜¯ `Error` ç‰©ä»¶ï¼Œé€™æ¨£çš„ä½œæ³•å¥½ä¸€é»ï¼Œå› ç‚ºæˆ‘å€‘å¯ä»¥ç¢ºä¿éŒ¯èª¤ç‰©ä»¶ä¹Ÿæœ‰å‹åˆ¥ã€‚

ä½†å»ä¸æ˜¯æœ€ä½³è§£æ³•ï¼Œå› ç‚ºå¦‚æœéŒ¯èª¤ç‰©ä»¶ä¸æ˜¯ `Error` ç‰©ä»¶ï¼Œç¨‹å¼å°±æœƒæ‹‹å‡ºéŒ¯èª¤ï¼Œæˆ‘å€‘é‚„æ˜¯å¯èƒ½åœ¨ç¨‹å¼ä¸­æ‹‹å‡ºä»»ä½•é¡å‹çš„éŒ¯èª¤ï¼Œé€²è€Œå°è‡´ Runtime Errorï¼

```ts
try {
  throw new Error('éŒ¯èª¤è¨Šæ¯');
} catch (error) {
  console.error((error as Error).message);
}

// å¦‚æœæˆ‘äº‚ä¸Ÿ Error ä»¥å¤–çš„æ±è¥¿å‘¢ï¼Ÿ Runtime Errorï¼
try {
  throw 'Hello World';
} catch (error) {
  console.error((error as Error).message);
}
```

### æœ€ä½³è§£æ³•ä¸‰ï¼šå‹•æ…‹å‹åˆ¥æª¢æŸ¥

æœ€ä½³è§£æ³•æ˜¯åœ¨ `catch` å€å¡Šä¸­æª¢æŸ¥éŒ¯èª¤ç‰©ä»¶çš„å‹åˆ¥ï¼Œé€™æ¨£å¯ä»¥ç¢ºä¿éŒ¯èª¤ç‰©ä»¶çš„å‹åˆ¥æ˜¯æ­£ç¢ºçš„ï¼Œæˆ‘å€‘å¯ä»¥é€é JS çš„ [`instanceof`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof) èªæ³•ä¾†æª¢æŸ¥æŸå€‹å€¼æ˜¯å¦ç‚ºå…¶ä»– Class çš„å¯¦ä¾‹ç‰©ä»¶æˆ–å»ºæ§‹å‡½å¼ ã€‚

```ts
try {
  throw new Error('éŒ¯èª¤è¨Šæ¯');
} catch (error) {
  if (error instanceof Error) {
    // åªæœ‰åœ¨ error æ˜¯ JS Error ç‰©ä»¶æ™‚æ‰æœƒåŸ·è¡Œ
    console.error(error.message);
  }
}
```

## ç¸½çµ

éå¿…è¦ä¸ä½¿ç”¨ `Any`ã€æ–·è¨€å‹åˆ¥ï¼Œå‹•æ…‹æª¢æ¸¬å‹åˆ¥ä¸¦åŸºæ–¼é è¨­éŒ¯èª¤ç‰©ä»¶ä¾†è™•ç†éŒ¯èª¤æ˜¯æœ€ä½³çš„è§£æ³•ã€‚æˆ‘å€‘ç”šè‡³å¯ä»¥åŸºæ–¼åŸç”ŸéŒ¯èª¤ç‰©ä»¶å®¢è£½åŒ–éŒ¯èª¤ç‰©ä»¶ï¼Œé€™æ¨£å¯ä»¥è®“æˆ‘å€‘åœ¨é–‹ç™¼æ™‚æ›´å®¹æ˜“çš„è­˜åˆ¥éŒ¯èª¤ï¼Œä¸éé€™åˆæ˜¯å»¶ä¼¸çš„è©±é¡Œäº†ï¼Œå¯ä»¥åƒè€ƒçœ‹çœ‹å»¶ä¼¸é–±è®€äº†è§£æ›´å¤šã€‚

## å»¶ä¼¸é–±è®€

- [ä½¿ç”¨ JavaScript try...catch ä¾†æ§åˆ¶ç¨‹å¼ä¸­çš„éŒ¯èª¤](https://www.webdong.dev/post/try-to-catch-errors/)
- [The 5 commandments of clean error handling in TypeScript - Marvin Roger](https://medium.com/with-orus/the-5-commandments-of-clean-error-handling-in-typescript-93a9cbdf1af5)
- [Handling errors like a pro in TypeScript - Kolby Sisk](https://engineering.udacity.com/handling-errors-like-a-pro-in-typescript-d7a314ad4991)
