---
isDraft: false
icon: { name: 'material-symbols:manage-search-rounded', title: 'æ–‡ç« æœå°‹ç¬¦è™Ÿ' }
title: 'How to add search to any kind of static site using Pagefind'
titleTC: 'ä½¿ç”¨ Pagefind æ›¿ä»»ä½•éœæ…‹ç¶²ç«™æ·»åŠ æœå°‹åŠŸèƒ½'
excerpt: 'ä¸åˆ° 3 æ­¥é©Ÿè®“ä½ çš„ç¶²ç«™æ“æœ‰ä»¥ WebAssembly é«˜æ•ˆé©…å‹•çš„å®¢è£½åŒ–æœå°‹åŠŸèƒ½ã€‚éœæ…‹ç¶²ç«™åƒæ˜¯éƒ¨è½æ ¼ã€æ–‡ä»¶ã€å€‹äººç¶²ç«™ã€å…¬å¸ç¶²ç«™â€¦â€¦ç­‰é€™é¡é–±è®€é«”é©—ç‚ºä¸»çš„ç¶²ç«™é€šå¸¸éƒ½æœ‰æœå°‹å…§å®¹çš„éœ€æ±‚ï¼Œæ°é€¢ Pagefind 1.0 çš„æ¨å‡ºæˆ‘æŠŠåŸå…ˆè‡ªè£½çš„ fuse.js æœå°‹åŠŸèƒ½æ›æˆ Pagefindï¼Œé€™ç¯‡æ–‡ç« å°‡åˆ†äº«å¦‚ä½•åœ¨ä»»ä½•éœæ…‹ç¶²ç«™ä¸ŠåŠ å…¥æœå°‹åŠŸèƒ½ã€‚'
category: 'æŠ€è¡“è¨è«–'
tags: ['pagefind', 'éœæ…‹ç¶²ç«™']
publishDate: 2024-04-13
---

## å‰è¨€

![åŸå…ˆå­˜åœ¨æ–¼å°è¦½åˆ—çš„ Fuse.js æœå°‹åŠŸèƒ½](./fuse-search.webp 'åŸå…ˆå­˜åœ¨æ–¼å°è¦½åˆ—çš„ Fuse.js æœå°‹åŠŸèƒ½')

å¦‚æœä½ æ˜¯ç¶²é æ±æ±è¼ƒæ—©æœŸçš„è®€è€…å¯èƒ½æœƒç™¼ç¾å°è¦½åˆ—åŸå…ˆçš„æœå°‹åŠŸèƒ½ä¸è¦‹äº†ï¼Œé€™æ˜¯å› ç‚ºè¿‘æœŸæŠŠä½¿ç”¨ [Fuse.js](https://www.fusejs.io/)ï¼ˆæ¨¡ç³Šæœå°‹å¥—ä»¶ï¼‰è£½ä½œçš„æœå°‹åŠŸèƒ½æ”¹ç‚ºä½¿ç”¨ [pagefind](https://pagefind.app/) ä¾†å¯¦ç¾ç¶²ç«™çš„æœå°‹åŠŸèƒ½ã€‚

Fuse.js å…¶å¯¦å·²ç¶“è¶³å¤ ç•¶å‰ç¶²ç«™çš„æœå°‹éœ€æ±‚ï¼Œä½†å¯ä»¥é æœŸç¶²ç«™å¤§ä¸€é»å°±æœƒé‡ä¸Šç“¶é ¸ï¼Œåˆç¢°å·§é‡ä¸Š pagefind 1.0 çš„æ¨å‡ºï¼Œå°±æ±ºå®šæŠŠåŸå…ˆçš„æœå°‹åŠŸèƒ½æ›æˆ pagefindï¼Œç•¶ç„¶èƒŒå¾Œé‚„æœ‰ä¸€äº›é¡å¤–çš„åŸå› ï¼Œåƒæ˜¯æˆ‘æƒ³ç§»é™¤åŸå…ˆè£½ä½œ UI æ‰€ç”¨åˆ°çš„ [preact](https://preactjs.com/)ã€‚

## é—œæ–¼ pagefind

pagefind æ˜¯ä¸€å€‹ä»¥ Rust ç·¨å¯«ä¸¦ä¸”é€éåŸ·è¡Œ WebAssembly ä¾†å¯¦ç¾çš„æœå°‹å¥—ä»¶ï¼Œå®ƒçš„èª•ç”ŸåŸå› å¾ä¸€é–‹å§‹å°±éå¸¸æ˜ç¢ºï¼šæ›¿ä»»ä½•éœæ…‹ç¶²é æä¾›ç¾æˆå¯ç”¨çš„æœå°‹æ–¹æ¡ˆã€‚

- æœå°‹å¿«é€Ÿ
- æä¾›ç¾æˆ UI
- æ”¯æ´ä»»ä½•éœæ…‹æ–‡ä»¶æœå°‹
- æ”¯æ´ [åˆ†é¡](https://pagefind.app/docs/filtering/)ã€[æ’åº](https://pagefind.app/docs/sorts/)ã€[è‡ªå®šç¾©æœå°‹è³‡æ–™](https://pagefind.app/docs/metadata/)ã€[ç´¢å¼•é‡è¦ç¨‹åº¦æ¨™è¨»](https://pagefind.app/docs/weighting/)

è®“æˆ‘æ„Ÿè¦ºåˆ°é€™æ˜¯ä¸€å€‹è¶³å¤ æˆç†Ÿå¯å³ç”¨çš„è§£æ±ºæ–¹æ¡ˆï¼Œå› æ­¤æ±ºå®šæ¡ç´ pagefind ä¾†å¯¦ç¾é€™å€‹ Astro éœæ…‹ç¶²ç«™çš„æœå°‹åŠŸèƒ½ã€‚

## ç¬¬ä¸€æ­¥ï¼š[å»ºç«‹ç´¢å¼•](https://pagefind.app/docs/running-pagefind/)

pagefind çš„é‹ä½œåŸç†ååˆ†ç°¡å–®ï¼Œåªéœ€è¦[å°ç”Ÿæˆå¥½çš„éœæ…‹ç¶²ç«™å»ºç«‹ç´¢å¼•](https://pagefind.app/docs/running-pagefind/)å³å¯ï¼Œç´¢å¼•å…¶å¯¦å°±æ˜¯ä¸€å€‹ `pagefind` è³‡æ–™å¤¾è£¡é¢è£æ»¿äº† pagefind æ‰€éœ€è¦ç”¨åˆ°çš„æª”æ¡ˆï¼Œ
éç¨‹ç„¡é ˆå®‰è£ç›¸é—œå¥—ä»¶ï¼Œåªéœ€è¦åŸ·è¡Œ `npx -y pagefind --site public --serve` å°±å¯ä»¥åŠæ™‚ä¸‹è¼‰ pagefind ä¸¦ä¸”å»ºç«‹ç´¢å¼•ï¼Œæˆ‘å°‡é€™å€‹æµç¨‹æ”¾ç½®åœ¨[å»ºæ§‹å®Œæˆç¶²ç«™ä¹‹å¾Œ](https://github.com/riceball-tw/web-dong-blog/blob/e599c15cb93ce08cb5cbbc1a51291ea39b1d35f1/package.json#L9)ã€‚

å»ºæ§‹å®Œæˆæœƒå¾—åˆ°é¡ä¼¼ä»¥ä¸‹çš„çµæœï¼Œä¸¦ä¸”å¤šå‡ºä¸€å€‹ `pagefind` è³‡æ–™å¤¾ï¼š

```bash
Running Pagefind v1.1.0 (Extended)
Running from: "D:\\USER\\Desktop\\astro-blog"
Source:       "dist"
Output:       "dist\\pagefind"

[Walking source directory]
Found 221 files matching **/*.{html}

[Parsing files]
Found a data-pagefind-body element on the site.
â†³ Ignoring pages without this tag.

[Reading languages]
Discovered 1 language: zh-hant-tw

[Building search indexes]
Total:
  Indexed 1 language
  Indexed 123 pages
  Indexed 5640 words
  Indexed 2 filters
  Indexed 1 sort

Finished in 1.503 seconds
```

é€™è£¡ä½¿ç”¨ `Extended` ç‰ˆæœ¬ï¼Œæ„å‘³è‘—é€™å€‹ç‰ˆæœ¬é‡å°ä¸­æ–‡èˆ‡æ—¥æ–‡é€™æ¨£[ç‰¹æ®Šèªè¨€](https://pagefind.app/docs/multilingual/#specialized-languages)æœ‰ç‰¹åˆ¥æ”¯æ´ï¼Œå¦‚æœéƒ¨è½æ ¼ä½¿ç”¨é€™é¡èªè¨€å¯ä»¥ç‰¹åˆ¥ç•™æ„ä½¿ç”¨è©²ç‰ˆæœ¬ã€‚

## ç¬¬äºŒæ­¥ï¼š[æ·»åŠ æœå°‹åŠŸèƒ½](https://pagefind.app/docs/)

Pagefind å¾ˆè²¼å¿ƒçš„è‡ªå¸¶ç¾æˆçš„æœå°‹ UIï¼Œä¸¦ä¸”åŒ…å«äº†é»æ“ŠåŠ è¼‰çš„åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨æƒ³è¦æ·»åŠ æœå°‹çš„é é¢ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç¢¼å³å¯å‰µå»ºæœå°‹åŠŸèƒ½ï¼š

```html
<link href="/pagefind/pagefind-ui.css" rel="stylesheet" />
<script src="/pagefind/pagefind-ui.js"></script>
<div id="search"></div>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    // æ›¿æ› #search ç‚ºä½ æƒ³è¦æ”¾ç½®æœå°‹çš„å…ƒç´ 
    new PagefindUI({ element: '#search', showSubResults: true });
  });
</script>
```

ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ç¾æˆ UIï¼Œè€Œæ˜¯å–®ç´”çš„ä½¿ç”¨ pagefind çš„æœå°‹åŠŸèƒ½ï¼Œä¸¦å–å¾—æœå°‹çµæœï¼š

```javascript
const pagefind = await import('/pagefind/pagefind.js');
const search = await pagefind.search('static');
```

## ç¸½çµ

ä¸åˆ° 3 æ­¥é©Ÿä½ çš„ç¶²ç«™å°±ç«‹åˆ»æœ‰ä»¥ WebAssembly é«˜æ•ˆé©…å‹•çš„å®¢è£½åŒ–æœå°‹åŠŸèƒ½äº† ğŸ™ŒğŸ»ï¼ä½ å¯èƒ½æœƒæƒ³è¦æ ¹æ“šè‡ªå·±çš„éœ€æ±‚é€²è¡Œä¸€äº›å®¢è£½åŒ–è¨­å®šï¼Œåƒæ˜¯é€™å€‹éƒ¨è½æ ¼æœ‰å° pagefind åšä¸€äº›é¡å¤–çš„è¨­å®šï¼š

- [ä¿®æ”¹é è¨­ UI æ¨£å¼ä»¥åŒ¹é…ç¶²ç«™é¢¨æ ¼](https://pagefind.app/docs/ui-usage/#customising-the-styles)
- [ä¾ç…§æ™‚é–“åˆ†é¡æœç´¢çµæœ](https://pagefind.app/docs/sorts/)
- [æ ¹æ“šç¾æœ‰åˆ†é¡ç³»çµ±é€²è¡Œæœç´¢åˆ†é¡](https://pagefind.app/docs/filtering/)

![ç¶²é æ±æ±é¦–é æœå°‹ç¯„ä¾‹](./webdong-homepage.webp)

## å»¶ä¼¸é–±è®€

- ç´°ç¯€å¦‚ä½•åœ¨éœæ…‹ç¶²ç«™åŠ å…¥ Fuse.js æœå°‹åŠŸèƒ½å¯ä»¥åƒè€ƒï¼š[Astro ç³»åˆ—æ–‡ç¬¬äºŒåæ—¥ï¼šå¯¦ä½œæœå°‹åŠŸèƒ½](http://localhost:4321/post/astro-search-functionality/)
