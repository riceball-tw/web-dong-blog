---
isDraft: false
icon:
  name: material-symbols:mediation-rounded
  title: Node Symbol
subHeadline: DOM API in One Go!
headline: DOM API in One Go!
excerpt: Manipulate web pages requires understanding the DOM. This article quickly teaches you how to programmatically modify, access, edit, and listen to the DOM.
category: JavaScript
publishDate: 2022-10-29
---

## Why Learn the DOM API?

When a web page loads an HTML document, the browser generates the <abbr title="Document Object Model">DOM</abbr>, allowing developers to programmatically manipulate the entire page document through the DOM API. Since JavaScript does not understand the structure of HTML, the DOM generated by the browser represents HTML in an "object" format.
In simple terms, **learning the DOM API helps us use JavaScript to manipulate any element on the web page**!

If we visualize the DOM as a chart, it would appear as a "tree structure," representing the graphical depiction of the DOM architecture, as shown below:

![DOM Tree Diagram](./dom-tree.webp)

<Sidenote type="success">
  If you have a basic understanding of JavaScript objects, you are almost ready to manipulate the DOM. If not, it's
  recommended to learn that first before diving into the DOM API.
</Sidenote>

## What is a DOM Node?

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th style="min-width:60px">Document Node</th>
            <td>Represents the starting point of the entire document, the origin of all nodes</td>
        </tr>
        <tr>
            <th>Element Node</th>
            <td>Represents elements (Element), such as `<div>`, `<script>`, `<h1>`</td>
        </tr>
        <tr>
            <th>Attribute Node</th>
            <td>Represents attributes of elements like `id`, `class`</td>
        </tr>
        <tr>
            <th>Text Node</th>
            <td>Represents plain text content within elements or attributes; line breaks and spaces are also a type of text node.</td>
        </tr>
        <tr>
            <th>Comment Node</th>
            <td>Represents comments in the document</td>
        </tr>
    </tbody>
</table>

**Everything in an HTML document is a type of DOM node**, and common nodes can be referenced in the chart above. Nodes are the fundamental building blocks of the DOM, and understanding the different types of nodes helps clarify what content you want to select, what you have selected, and how to handle it. Later in the article, you will learn various methods to select these different types of nodes, allowing you to programmatically manipulate and listen to them to achieve programmatic control over the web page.

Next, we will divide the content into three main sections, learning step by step how to use JavaScript to manipulate web pages through the DOM API, **learning to access, edit, and listen to the DOM**.

## 1. Selecting DOM Nodes

HTML elements have a hierarchical relationship, which is also reflected in the structure of the DOM. You can grab different related nodes based on a single node. For example, consider the following code:

```html
<div>
  <h2>A List</h2>
  <ul>
    <li>List Item 01</li>
    <li>List Item 02</li>
  </ul>
</div>
```

For the `<ul>` element: `<h2>` is its sibling, `<div>` is its parent, and `<li>` is its child. Once you understand the relationships between elements, you can use different methods to select nodes in the web page.

### Common Practical Examples

In most situations, you don't need to remember too many selection methods; just remember the commonly used ones. For example, using [`querySelector`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector) for selecting a single element and [`querySelectorAll`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll) for selecting multiple elements can handle about 90% of scenarios.

```html
<div id="foobar" class="foobar">Hello, World</div>
<ul>
  <li>Item 01</li>
  <li>Item 02</li>
  <li>Item 03</li>
</ul>

<script>
  // Select elements matching the .foobar selector group based on document
  const foobar = document.querySelector('.foobar');
  // Select all li within ul based on document
  const foobar2 = document.querySelectorAll('ul li');
</script>
```

<Sidenote type="warning">
  If you feel unfamiliar with the concepts, practicing a few times can be more helpful than just reading the
  documentation. Here is an online [CodePen](https://codepen.io/riecball/pen/VwBMWPy) template where you can copy and
  practice selecting elements.
</Sidenote>

### More Advanced DOM Node Selection

After practicing different methods of selecting DOM elements, you'll find that the results returned by different methods can vary. This is because they select different "things." There are four types of results you may encounter. The details are summarized in the following list and table:

#### Node

The basic building block of the DOM; anything in the DOM is a node.

#### Element

An element is a type of node. For example, `<h1>`, `<body>`, and `<div>` are all elements.

#### NodeList

A collection of nodes, similar to an array, with indexing and a `forEach` method. Most of the time, it is static, meaning changes in the DOM do not reflect in the data.

#### HTMLCollection

A collection of elements, similar to an array, with indexing. It is a dynamic collection, meaning changes in the DOM will reflect in the data.

<table class="table-fluid">
    <thead>
        <tr>
            <th style="min-width:100px">Name</th>
            <th>Element</th>
            <th>Node</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>Content</th>
            <td>Only allows HTML elements (like `<span>`, `<div>`, etc.)</td>
            <td>Allows any node present in the HTML document (comments, text nodes count)</td>
        </tr>
        <tr>
            <th>Methods and Properties</th>
            <td>A special type of node with some extra properties</td>
            <td>The most basic HTML component with some fundamental properties</td>
        </tr>
        <tr>
            <th>When to Use</th>
            <td>Most of the time</td>
            <td>When selecting things other than HTML tags</td>
        </tr>
    </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="min-width:120px">Name</th>
      <th>HTMLCollection</th>
      <th>NodeList</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Description</th>
      <td>A collection of document elements</td>
      <td>A collection of document nodes</td>
    </tr>
    <tr>
      <th>Array Methods Available</th>
      <td>None</td>
      <td>Only forEach</td>
    </tr>
    <tr>
      <th>Live Update</th>
      <td>Yes</td>
      <td>Mostly not</td>
    </tr>
  </tbody>
</table>

## 2. Editing DOM Nodes

After selecting the DOM nodes, let's print the results to see what properties are available:

```html
<div id="foobar">Hello</div>

<script>
  // Based on the document, select the first element with id foobar and print it
  console.log(document.getElementById('foobar'));
</script>
```

You will get a print result similar to the one shown in the animated image below:

<Video
  width={676}
  height={276}
  data={[
    {
      type: 'webm',
      src: 'images/posts/dom-from-the-begineeing/dom-log.webm',
    },
    {
      type: 'mp4',
      src: 'images/posts/dom-from-the-begineeing/dom-log.mp4',
    },
  ]}
></Video>

You can see that each element object has many properties, which may seem very complex. However, the commonly used properties are actually not many, and you can refer to the documentation when needed. Below are examples of the two most commonly selected property types (changing styles and content):

### Changing Element Style

To modify the style of an element, you can start with the `class` property and the `style` property. You can directly modify the element's properties to achieve the style changes. For example:

```javascript
// Modify the element's style property:
element.style.backgroundColor = 'red';
element.style.marginTop = '16px';
element.style['padding-top'] = '16px';
```

```javascript
// Modify the element's style property:
element.classList.add('active'); // Add "active" class
element.classList.remove('active'); // Remove "active" class
element.classList.toggle('active'); // Toggle "active" class
```

### Changing Element Content

To modify the content of an element, it can generally be divided into "modifying HTML" and "modifying plain text," depending on the needs. For example:

```javascript
// Modify the HTML content of the selected element
document.getElementById('foobar').innerHTML = '<h1>This is some text</h1>';
// Modify the text content of the selected element
document.getElementById('foobar').innerText = 'This is some text';
```

<Sidenote type="warning">
  When using `innerHTML`, special attention should be paid to the data source. Malicious data sources can execute
  harmful code through `innerHTML` (Cross-Site Scripting <abbr title="Cross Site Scripting">XSS</abbr>). Ensure that the
  injected data source is trustworthy.
</Sidenote>

## 3. Listening to DOM Nodes

### addEventListener Event Listener

If you want to know what interactions users have with the webpage, you can use the [`addEventListener`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener) method to listen for element activities. Most of the time, examples one and two can meet all event listening requirements. The syntax is as follows:

```javascript
addEventListener(type, listener, options);
```

- Parameter one: [Type of event](https://developer.mozilla.org/en-US/docs/Web/Events)
- Parameter two: Callback function, which will be executed when the event is triggered
- Parameter three: Specifies the [options](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#parameters) related to the event listener

```javascript
// Use the element's addEventListener method to call the clicked function when "click" occurs
// All three of the following methods are valid

// Example one: Call an external function
element.addEventListener('click', clicked);
function clicked() {
  // ...
}

// Example two: Call an anonymous function
element.addEventListener('click', function () {
  // ...
});

// Example three: Add a settings object: this event listener will stop listening after being activated once
element.addEventListener('click', function () {}, { once: true });
```

### removeEventListener Remove Event Listener

When event listeners are no longer needed, they can be manually removed to avoid performance issues caused by too many background event listeners. This method can only remove event listeners that are executed by calling external functions; event listeners that call anonymous functions cannot be removed.

```javascript
// Add listener
element.addEventListener('mousemove', myFunction);

// Remove listener
element.removeEventListener('mousemove', myFunction);
```

### Listening to Forms

When you want users to input data, that's where the `<form>` comes into play. It provides a series of basic methods and interfaces that allow us to conveniently, quickly, and standardize the retrieval of user input data. The `submit` event listener can be used to capture the submitted form.

```javascript
<form data-form>
  <input name="userInput" type="text"> // Set name for later retrieval
  <input type="submit">
</form>
```

```javascript
const form = document.querySelector('[data-form]');
// Handle submission
form.addEventListener('submit', (e) => {
  console.log(e.target.userInput.value); // Get the value of name = "userInput"
  e.preventDefault(); // Cancel default event (redirect page)
  e.target.reset(); // Clear the form
});
```

### Preventing Default Behavior

Certain elements have default "events," such as clicking `<a>` or submitting `<form>`, which will redirect to other pages. In these cases, `preventDefault` can be used to cancel these default events. Additionally, passing `false` at the end of the event listener also has the same effect of preventing default behavior.

```javascript
element.addEventListener('click', (e) => {
  e.preventDefault(); // Capture the event and prevent default behavior
});
```

## Summary

- The DOM is a way to represent documents as objects, structured like a tree.
- Any information in an HTML document is a type of node in the DOM.
- Selecting multiple nodes returns a NodeList, while selecting multiple elements returns an HTMLCollection; both are array-like objects.
- Nodes have many default methods and properties that can be queried after printing them in the terminal.

<Sidenote type="success">
  <a target="_blank" href="/images/posts/dom-from-the-begineeing/dom-cheatsheet-full.webp">
    There are many methods, feeling confused? No worries, here are two cheat sheets for reference.
  </a>
  ![DOM Tree Diagram](./cheat-sheet-demo.webp)
</Sidenote>

This article is based on the introductory topic I covered in the [Hex School](https://www.hexschool.com/) JS live class, which includes answers. If you're interested, feel free to practice here: [JS Live Class - Fall 2022 - DOM Manipulation](https://codepen.io/riecball/pen/XWYrmKz)

## References

- [Introduction to the DOM - MDN](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction)
- [Javascript HTML DOM - W3C](https://www.w3schools.com/js/js_htmldom.asp)
- [DOM - GeeksforGeeks](https://www.geeksforgeeks.org/dom-document-object-model/)
