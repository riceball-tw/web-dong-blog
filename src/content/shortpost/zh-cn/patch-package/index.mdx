---
headline: 如何直接修改项目依赖包原始代码（node_modules）？
publishDate: 2024-10-24
category: Technical Discussion
social:
  threads: https://www.threads.net/@webdong.dev/post/DBeDEGyBkHk
---

开发时有时会遇到使用的包存在一些 BUG 或功能需要补上，且没有时间慢慢发请求等待包更新，像这样的情境通常就是 fork 包改写后修改依赖来源。

我一直以为 fork 并改写出自己的包并接上是唯一妥善的方式，直到无意间翻到 [patch-package](https://www.npmjs.com/package/patch-package) 这个包，并且在细读文档后才发现原来 pnpm 与 yarn2+ 早就已经支持修改依赖包原始代码的功能。

pnpm 有不错的[文档与视频范例](https://pnpm.io/cli/patch)描述如何 patch 特定包。
简单来说会创建一个 patches 文件夹存放修改过的包，并且通过 patchedDependencies 来引用被修改过的包，算是一个更优雅的方式去管理临时对包的修补。

pnpm 还可以参考看看 [pnpm-patch-i](https://github.com/antfu/pnpm-patch-i)。
